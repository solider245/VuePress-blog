(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{474:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#å¿«é€Ÿä¸Šæ‰‹"}},[s._v("å¿«é€Ÿä¸Šæ‰‹")]),a("ul",[a("li",[a("a",{attrs:{href:"#step-0"}},[s._v("Step 0:")])]),a("li",[a("a",{attrs:{href:"#step-1-éå¿…é¡»"}},[s._v("Step 1 (éå¿…é¡»):")])]),a("li",[a("a",{attrs:{href:"#step-2"}},[s._v("Step 2:")])]),a("li",[a("a",{attrs:{href:"#step-3"}},[s._v("Step 3:")])])])]),a("li",[a("a",{attrs:{href:"#å…³äºscrapy-distributed"}},[s._v("å…³äºScrapy-Distributed")])])])]),s._v("\nä½¿ç”¨Scrapyå¼€å‘ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«ï¼Ÿä½ çŸ¥é“æœ€å¿«çš„æ–¹æ³•æ˜¯ä»€ä¹ˆå—ï¼Ÿä¸€åˆ†é’ŸçœŸçš„èƒ½ å¼€å‘å¥½æˆ–è€…ä¿®æ”¹å‡º ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«å—ï¼Ÿ"),a("p"),s._v(" "),a("p",[s._v("è¯ä¸å¤šè¯´ï¼Œå…ˆè®©æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå®è·µï¼Œå†è¯¦ç»†èŠèŠç»†èŠ‚~")]),s._v(" "),a("h2",{attrs:{id:"å¿«é€Ÿä¸Šæ‰‹"}},[s._v("å¿«é€Ÿä¸Šæ‰‹")]),s._v(" "),a("h3",{attrs:{id:"step-0"}},[a("strong",[s._v("Step 0:")])]),s._v(" "),a("p",[s._v("é¦–å…ˆå®‰è£… Scrapy-Distributed :")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pip install scrapy-distributed\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("(éå¿…é¡»)å¦‚æœä½ æ²¡æœ‰æ‰€éœ€è¦çš„è¿è¡Œæ¡ä»¶ï¼Œä½ å¯ä»¥å¯åŠ¨ä¸¤ä¸ª Docker é•œåƒè¿›è¡Œæµ‹è¯• (RabbitMQ å’Œ RedisBloom):")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\ndocker run -d --name rabbitmq -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:15672:15672 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5672:5672 rabbitmq:3\n\ndocker run -d --name redis-redisbloom -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:6379:6379 redislabs/rebloom:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"step-1-éå¿…é¡»"}},[s._v("Step 1 (éå¿…é¡»):")]),s._v(" "),a("p",[s._v("å¦‚æœä½ æœ‰ä¸€ä¸ªç°æˆçš„çˆ¬è™«ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸ª Stepï¼Œç›´æ¥åˆ° Step 2ã€‚")]),s._v(" "),a("p",[s._v("åˆ›å»ºä¸€ä¸ªçˆ¬è™«å·¥ç¨‹ï¼Œæˆ‘è¿™é‡Œä»¥ä¸€ä¸ª sitemap çˆ¬è™«ä¸ºä¾‹:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("scrapy startproject simple_example\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ç„¶åä¿®æ”¹ spiders æ–‡ä»¶å¤¹ä¸‹çš„çˆ¬è™«ç¨‹åºæ–‡ä»¶:")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" scrapy_distributed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("spiders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sitemap "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" SitemapSpider\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" scrapy_distributed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("queues"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amqp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" QueueConfig\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" scrapy_distributed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dupefilters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("redis_bloom "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" RedisBloomConfig\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySpider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SitemapSpider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example"')]),s._v("\n    sitemap_urls "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.people.com.cn/robots.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    queue_conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" QueueConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" QueueConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" durable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arguments"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x-queue-mode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lazy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x-max-priority"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    redis_bloom_conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RedisBloomConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" RedisBloomConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example:dupefilter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"parse response, url: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"step-2"}},[a("strong",[s._v("Step 2:")])]),s._v(" "),a("p",[s._v("åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ settings.py ä¸‹çš„"),a("code",[s._v("SCHEDULER")]),s._v(", "),a("code",[s._v("DUPEFILTER_CLASS")]),s._v(" å¹¶ä¸”æ·»åŠ  RabbitMQ å’Œ Redis çš„ç›¸å…³é…ç½®ï¼Œä½ å°±å¯ä»¥é©¬ä¸Šè·å¾—ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«ï¼ŒScrapy-Distributed ä¼šå¸®ä½ åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤é…ç½®çš„ RabbitMQ é˜Ÿåˆ—å’Œä¸€ä¸ªé»˜è®¤é…ç½®çš„ RedisBloom å¸ƒéš†è¿‡æ»¤å™¨ã€‚")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("\n\nSCHEDULER "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scrapy_distributed.schedulers.DistributedScheduler"')]),s._v("\nSCHEDULER_QUEUE_CLASS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scrapy_distributed.queues.amqp.RabbitQueue"')]),s._v("\nRABBITMQ_CONNECTION_PARAMETERS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"amqp://guest:guest@localhost:5672/example/?heartbeat=0"')]),s._v("\nDUPEFILTER_CLASS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scrapy_distributed.dupefilters.redis_bloom.RedisBloomDupeFilter"')]),s._v("\nBLOOM_DUPEFILTER_REDIS_URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis://:@localhost:6379/0"')]),s._v("\nBLOOM_DUPEFILTER_REDIS_HOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),s._v("\nBLOOM_DUPEFILTER_REDIS_PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\nREDIS_BLOOM_PARAMS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis_cls"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redisbloom.client.Client"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nBLOOM_DUPEFILTER_ERROR_RATE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.001")]),s._v("\n\nBLOOM_DUPEFILTER_CAPACITY "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 100_0000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("ä½ ä¹Ÿå¯ä»¥ç»™ä½ çš„ Spider ç±»ï¼Œå¢åŠ ä¸¤ä¸ªç±»å±æ€§ï¼Œæ¥åˆå§‹åŒ–ä½ çš„ RabbitMQ é˜Ÿåˆ—æˆ– RedisBloom å¸ƒéš†è¿‡æ»¤å™¨:")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySpider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SitemapSpider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    \n    queue_conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" QueueConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" QueueConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" durable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arguments"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x-queue-mode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lazy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x-max-priority"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    redis_bloom_conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RedisBloomConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" RedisBloomConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"example:dupefilter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" error_rate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" capacity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("100_0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"step-3"}},[a("strong",[s._v("Step 3:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scrapy crawl <your_spider>\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æ£€æŸ¥ä¸€ä¸‹ä½ çš„ RabbitMQ é˜Ÿåˆ— å’Œ RedisBloom è¿‡æ»¤å™¨ï¼Œæ˜¯ä¸æ˜¯å·²ç»æ­£å¸¸è¿è¡Œäº†ï¼Ÿ")]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼ŒScrapy-Distributed çš„åŠ æŒä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥å°†æ™®é€šçˆ¬è™«ä¿®æ”¹æˆæ”¯æŒ RabbitMQ é˜Ÿåˆ— å’Œ RedisBloom å¸ƒéš†è¿‡æ»¤å™¨çš„åˆ†å¸ƒå¼çˆ¬è™«ã€‚åœ¨æ‹¥æœ‰ RabbitMQ å’Œ RedisBloom ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œä¿®æ”¹é…ç½®çš„æ—¶é—´ä¹Ÿå°±ä¸€åˆ†é’Ÿã€‚ğŸ˜‚")]),s._v(" "),a("h2",{attrs:{id:"å…³äºscrapy-distributed"}},[s._v("å…³äºScrapy-Distributed")]),s._v(" "),a("p",[s._v("ç›®å‰ Scrapy-Distributed ä¸»è¦å‚è€ƒäº†Scrapy-Redis å’Œ scrapy-rabbitmq è¿™ä¸¤ä¸ªåº“ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä½ æœ‰è¿‡ Scrapy çš„ç›¸å…³ç»éªŒï¼Œå¯èƒ½ä¼šçŸ¥é“ Scrapy-Redis è¿™ä¸ªåº“ï¼Œå¯ä»¥å¾ˆå¿«é€Ÿçš„åšåˆ†å¸ƒå¼çˆ¬è™«ï¼Œå¦‚æœä½ å°è¯•è¿‡ä½¿ç”¨ RabbitMQ ä½œä¸ºçˆ¬è™«çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½ å¯èƒ½è¿˜è§åˆ°è¿‡ scrapy-rabbitmq è¿™ä¸ªé¡¹ç›®ã€‚è¯šç„¶ Scrapy-Redis å·²ç»å¾ˆæ–¹ä¾¿äº†ï¼Œscrapy-rabbitmq ä¹Ÿèƒ½å®ç° RabbitMQ ä½œä¸ºä»»åŠ¡é˜Ÿåˆ—ï¼Œä½†æ˜¯ä»–ä»¬å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œæˆ‘è¿™é‡Œç®€å•æå‡ºå‡ ä¸ªé—®é¢˜ã€‚")]),s._v(" "),a("ol",[a("li",[s._v("Scrapy-Redis ä½¿ç”¨ Redis çš„ set å»é‡ï¼Œé“¾æ¥æ•°é‡è¶Šå¤§å ç”¨çš„å†…å­˜å°±è¶Šå¤§ï¼Œä¸é€‚åˆä»»åŠ¡æ•°é‡å¤§çš„åˆ†å¸ƒå¼çˆ¬è™«ã€‚")]),s._v(" "),a("li",[s._v("Scrapy-Redis ä½¿ç”¨ Redis çš„ list ä½œä¸ºé˜Ÿåˆ—ï¼Œå¾ˆå¤šåœºæ™¯ä¼šæœ‰ä»»åŠ¡ç§¯å‹ï¼Œä¼šå¯¼è‡´å†…å­˜èµ„æºæ¶ˆè€—è¿‡å¿«ï¼Œæ¯”å¦‚æˆ‘ä»¬çˆ¬å–ç½‘ç«™ sitemap æ—¶ï¼Œé“¾æ¥å…¥é˜Ÿçš„é€Ÿåº¦è¿œè¿œå¤§äºå‡ºé˜Ÿã€‚")]),s._v(" "),a("li",[s._v("scrapy-rabbitmq ç­‰ RabbitMQ çš„ Scrapy ç»„ä»¶ï¼Œåœ¨åˆ›å»ºé˜Ÿåˆ—æ–¹é¢ï¼Œæ²¡æœ‰æä¾› RabbitMQ æ”¯æŒçš„å„ç§å‚æ•°ï¼Œæ— æ³•æ§åˆ¶é˜Ÿåˆ—çš„æŒä¹…åŒ–ç­‰å‚æ•°ã€‚")]),s._v(" "),a("li",[s._v("scrapy-rabbitmq ç­‰ rabbitmq æ¡†æ¶çš„ Scheduler æš‚æœªæ”¯æŒåˆ†å¸ƒå¼çš„ dupefilter ï¼Œéœ€è¦ä½¿ç”¨è€…è‡ªè¡Œå¼€å‘æˆ–æ¥å…¥ç›¸å…³ç»„ä»¶ã€‚")]),s._v(" "),a("li",[s._v("Scrapy-Redis å’Œ scrapy-rabbitmq ç­‰æ¡†æ¶éƒ½æ˜¯ä¾µå…¥å¼çš„ï¼Œå¦‚æœéœ€è¦ç”¨è¿™äº›æ¡†æ¶å¼€å‘åˆ†å¸ƒå¼çš„çˆ¬è™«ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹è‡ªå·±çš„çˆ¬è™«ä»£ç ï¼Œé€šè¿‡ç»§æ‰¿æ¡†æ¶çš„ Spider ç±»ï¼Œæ‰èƒ½å®ç°åˆ†å¸ƒå¼åŠŸèƒ½ã€‚")])]),s._v(" "),a("p",[s._v("äºæ˜¯ï¼ŒScrapy-Distributed æ¡†æ¶å°±åœ¨è¿™ä¸ªæ—¶å€™è¯ç”Ÿäº†ï¼Œåœ¨éä¾µå…¥å¼è®¾è®¡ä¸‹ï¼Œä½ åªéœ€è¦é€šè¿‡ä¿®æ”¹ settings.py ä¸‹çš„é…ç½®ï¼Œæ¡†æ¶å°±å¯ä»¥æ ¹æ®é»˜è®¤é…ç½®å°†ä½ çš„çˆ¬è™«åˆ†å¸ƒå¼åŒ–ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†è§£å†³Scrapy-Redis å’Œ scrapy-rabbitmq å­˜åœ¨çš„ä¸€äº›ç—›ç‚¹ï¼ŒScrapy-Distributed åšäº†ä¸‹é¢å‡ ä»¶äº‹:")]),s._v(" "),a("ol",[a("li",[s._v("é‡‡ç”¨äº† RedisBloom çš„å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå†…å­˜å ç”¨æ›´å°‘ã€‚")]),s._v(" "),a("li",[s._v("æ”¯æŒäº† RabbitMQ é˜Ÿåˆ—å£°æ˜çš„æ‰€æœ‰å‚æ•°é…ç½®ï¼Œå¯ä»¥è®© RabbitMQ é˜Ÿåˆ—æ”¯æŒ lazy-mode æ¨¡å¼ï¼Œå°†å‡å°‘å†…å­˜å ç”¨ã€‚")]),s._v(" "),a("li",[s._v("RabbitMQ çš„é˜Ÿåˆ—å£°æ˜æ›´åŠ çµæ´»ï¼Œä¸åŒçˆ¬è™«å¯ä»¥ä½¿ç”¨ç›¸åŒé˜Ÿåˆ—é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„é˜Ÿåˆ—é…ç½®ã€‚")]),s._v(" "),a("li",[s._v("Scheduler çš„è®¾è®¡ä¸Šæ”¯æŒå¤šä¸ªç»„ä»¶çš„æ­é…ç»„åˆï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ RedisBloom çš„DupeFilterï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ RabbitMQ çš„ Scheduler æ¨¡å—ã€‚")]),s._v(" "),a("li",[s._v("å®ç°äº† Scrapy åˆ†å¸ƒå¼åŒ–çš„éä¾µå…¥å¼è®¾è®¡ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®ï¼Œå°±å¯ä»¥å°†æ™®é€šçˆ¬è™«åˆ†å¸ƒå¼åŒ–ã€‚")])]),s._v(" "),a("p",[s._v("ç›®å‰æ¡†æ¶è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æ­£åœ¨æ·»åŠ ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒç»­å…³æ³¨é¡¹ç›®ä»“åº“çš„åŠ¨å‘ï¼Œæœ‰ä»€ä¹ˆæƒ³æ³•ä¹Ÿå¯ä»¥ä¸€èµ·è®¨è®ºã€‚")]),s._v(" "),a("p",[s._v("Scrapy-Distributed çš„ github ä»“åº“åœ°å€ï¼š"),a("a",{attrs:{href:"https://github.com/Insutanto/scrapy-distributed",target:"_blank",rel:"noopener noreferrer"}},[s._v("github.com/Insutanto/sâ€¦"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("åšå®¢åœ°å€ï¼š"),a("a",{attrs:{href:"https://insutanto.net/posts/scrapy/",target:"_blank",rel:"noopener noreferrer"}},[s._v("insutanto.net/posts/scrapâ€¦"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);