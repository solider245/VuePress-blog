(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{441:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#ç®€ä»‹-multiprocessing-pool"}},[s._v("ç®€ä»‹ multiprocessing.Pool")])]),a("li",[a("a",{attrs:{href:"#ä¸€äº›ä»£ç åº”è¯¥èµ·ä½œç”¨ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨"}},[s._v("ä¸€äº›ä»£ç åº”è¯¥èµ·ä½œç”¨ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨")])]),a("li",[a("a",{attrs:{href:"#å¦‚ä½•åœ¨posixï¼ˆä»¥å‰ç§°ä¸ºunixçš„æ ‡å‡†ï¼‰ä¸Šå¯åŠ¨å­æµç¨‹"}},[s._v("å¦‚ä½•åœ¨POSIXï¼ˆä»¥å‰ç§°ä¸ºUnixçš„æ ‡å‡†ï¼‰ä¸Šå¯åŠ¨å­æµç¨‹")])]),a("li",[a("a",{attrs:{href:"#åªæœ‰è¿™ä¸ªé—®é¢˜-fork-ing"}},[s._v("åªæœ‰è¿™ä¸ªé—®é¢˜fork()ING")]),a("ul",[a("li",[a("a",{attrs:{href:"#fork-å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹"}},[s._v("fork() å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹")])]),a("li",[a("a",{attrs:{href:"#ä½†-fork-ä¸ä¼šå¤åˆ¶æ‰€æœ‰å†…å®¹"}},[s._v("ä½†fork()ä¸ä¼šå¤åˆ¶æ‰€æœ‰å†…å®¹")])])])]),a("li",[a("a",{attrs:{href:"#è°œå›¢è§£å†³äº†"}},[s._v("è°œå›¢è§£å†³äº†")])]),a("li",[a("a",{attrs:{href:"#åˆ›å¯è´´å’Œè§£å†³æ–¹æ³•"}},[s._v("åˆ›å¯è´´å’Œè§£å†³æ–¹æ³•")])]),a("li",[a("a",{attrs:{href:"#çœŸæ­£çš„è§£å†³æ–¹æ¡ˆï¼šåœæ­¢-fork-æŠ±æ€¨"}},[s._v("çœŸæ­£çš„è§£å†³æ–¹æ¡ˆï¼šåœæ­¢fork()æŠ±æ€¨")])]),a("li",[a("a",{attrs:{href:"#äº†è§£æ›´å¤š"}},[s._v("äº†è§£æ›´å¤š")])])])]),s._v("\næ‚¨æ­£åœ¨"),a("code",[s._v("multiprocessing")]),s._v("è·¨å¤šä¸ªè¿›ç¨‹è¿è¡Œä¸€äº›ä»£ç ï¼Œè€Œè¿™äº›ä»£ç åªæ˜¯ååœ¨é‚£é‡Œã€‚å¡ä½äº†"),a("p"),s._v(" "),a("p",[s._v("æ‚¨æ£€æŸ¥CPUä½¿ç”¨ç‡-ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿï¼Œå®ƒæ²¡æœ‰åšä»»ä½•å·¥ä½œã€‚")]),s._v(" "),a("p",[s._v("è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ")]),s._v(" "),a("p",[s._v("åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç æ¥è§£å†³æ­¤é—®é¢˜ï¼ˆè·³åˆ°æœ€åè¿›è¡Œå°è¯•ï¼‰ï¼Œä½†æ˜¯é¦–å…ˆï¼Œæ˜¯æ—¶å€™æ·±å…¥ç ”ç©¶Pythonçš„ç¼ºé™·å’ŒPOSIXç³»ç»Ÿç¼–ç¨‹çš„ç—›è‹¦äº†ï¼Œä½¿ç”¨ä»¤äººå…´å¥‹çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¾ˆç®€å•ã€‚ä»¤äººä¿¡æœçš„é²¨é±¼ä¸»é¢˜éšå–»ï¼")]),s._v(" "),a("p",[s._v("è®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæ¯”å–»çš„åœºæ™¯ï¼šæ‚¨åœ¨å……æ»¡é²¨é±¼çš„æ¸¸æ³³æ± é‡Œæ¸¸æ³³ã€‚ï¼ˆé²¨é±¼æ˜¯æµç¨‹çš„éšå–»ã€‚ï¼‰")]),s._v(" "),a("p",[s._v("æ¥ä¸‹æ¥ï¼Œæ‚¨æ‹¿å‰å­ã€‚ï¼ˆå‰å­æ˜¯çš„éšå–»"),a("code",[s._v("fork()")]),s._v("ã€‚ï¼‰")]),s._v(" "),a("p",[s._v("æ‚¨ç”¨å‰å­åˆºäº†ä¸€ä¸‹è‡ªå·±ã€‚åˆºåˆºåˆºã€‚é²œè¡€å¼€å§‹æ¸—å‡ºï¼Œé²¨é±¼å¼€å§‹ç›˜æ—‹ï¼Œå¾ˆå¿«ä½ å°±ä¼šå‘ç°è‡ªå·±æ­»äº†-æ­»åœ¨æ°´ä¸­ï¼")]),s._v(" "),a("p",[s._v("åœ¨ç©¿è¶Šæ—¶ç©ºçš„æ—…ç¨‹ä¸­ï¼Œæ‚¨å°†é‡åˆ°ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("ç¥ç§˜çš„å¤±è´¥ï¼Œå…¶ä¸­Python "),a("code",[s._v("multiprocessing.Pool")]),s._v("é™·å…¥äº†åƒµå±€ã€‚")]),s._v(" "),a("li",[s._v("ç¥ç§˜çš„æ ¹æºï¼š"),a("code",[s._v("fork()")]),s._v("ã€‚")]),s._v(" "),a("li",[s._v("ä¸€ä¸ªéš¾é¢˜ï¼Œå…¶ä¸­"),a("code",[s._v("fork()")]),s._v("å¤åˆ¶æ‰€æœ‰å†…å®¹éƒ½æ˜¯é—®é¢˜ï¼Œè€Œ"),a("code",[s._v("fork()")]),s._v("ä¸æ˜¯å¤åˆ¶æ‰€æœ‰å†…å®¹ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚")]),s._v(" "),a("li",[s._v("ä¸€äº›åˆ›å¯è´´ä¸èƒ½æ­¢è¡€ã€‚")]),s._v(" "),a("li",[s._v("è¯¥è§£å†³æ–¹æ¡ˆå¯ä»¥é˜²æ­¢æ‚¨çš„ä»£ç è¢«é²¨é±¼åƒæ‰ã€‚")])]),s._v(" "),a("p",[s._v("è®©æˆ‘ä»¬å¼€å§‹ï¼")]),s._v(" "),a("h2",{attrs:{id:"ç®€ä»‹-multiprocessing-pool"}},[s._v("ç®€ä»‹ "),a("code",[s._v("multiprocessing.Pool")])]),s._v(" "),a("p",[s._v("Pythonæä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ¨¡å—ï¼Œå…è®¸æ‚¨åœ¨è¿›ç¨‹æ± ä¸­è¿è¡Œä»»åŠ¡ï¼Œè¿™æ˜¯æ”¹å–„ç¨‹åºå¹¶è¡Œæ€§çš„å¥½æ–¹æ³•ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œè¿™äº›ç¤ºä¾‹å‡æœªåœ¨Windowsä¸Šè¿›è¡Œè¿‡æµ‹è¯•ï¼›æˆ‘åœ¨è¿™é‡Œé‡ç‚¹å…³æ³¨* nixå¹³å°ã€‚ï¼‰")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" multiprocessing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Pool\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" os "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" getpid\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I\'m process"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" Pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("double"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("å¦‚æœè¿è¡Œæ­¤å‘½ä»¤ï¼Œåˆ™ä¼šå¾—åˆ°ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("I'm process 4942\nI'm process 4943\nI'm process 4944\nI'm process 4942\nI'm process 4943\n[2, 4, 6, 8, 10] \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("å¦‚æ‚¨æ‰€è§ï¼Œè¯¥"),a("code",[s._v("double()")]),s._v("å‡½æ•°åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­è¿è¡Œã€‚")]),s._v(" "),a("h2",{attrs:{id:"ä¸€äº›ä»£ç åº”è¯¥èµ·ä½œç”¨ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨"}},[s._v("ä¸€äº›ä»£ç åº”è¯¥èµ·ä½œç”¨ï¼Œä½†æ˜¯ä¸èµ·ä½œç”¨")]),s._v(" "),a("p",[s._v("ä¸å¹¸çš„æ˜¯ï¼Œå°½ç®¡è¯¥"),a("code",[s._v("Pool")]),s._v("è¯¾ç¨‹å¾ˆæœ‰ç”¨ï¼Œä½†ä¹Ÿå……æ»¡äº†æ¶æ¯’çš„é²¨é±¼ï¼Œåªç­‰æ‚¨çŠ¯äº†ä¸€ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å®Œå…¨åˆç†çš„ä»£ç ï¼š")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logging\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" threading "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Thread\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" queue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Queue\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handlers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" QueueListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" QueueHandler\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" multiprocessing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Pool\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setup_logging")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Logs get written to a queue, and then a thread reads")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# from that queue and writes messages to a file:")]),s._v("\n    _log_queue "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    QueueListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        _log_queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FileHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"out.log"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getLogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("addHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("QueueHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_log_queue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Our parent process is running a thread that")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logs messages:")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write_logs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, I just did something"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("write_logs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("runs_in_subprocess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"About to log..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, I did something"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"...logged"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    setup_logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Meanwhile, we start a process pool that writes some")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logs. We do this in a loop to make race condition more")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# likely to be triggered.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" Pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("runs_in_subprocess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("p",[s._v("è¯¥ç¨‹åºçš„ä½œç”¨å¦‚ä¸‹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("åœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œæ—¥å¿—æ¶ˆæ¯è¢«è·¯ç”±åˆ°é˜Ÿåˆ—ï¼Œå¹¶ä¸”çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è¯»å–å¹¶å°†è¿™äº›æ¶ˆæ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ã€‚")]),s._v(" "),a("li",[s._v("å¦ä¸€ä¸ªçº¿ç¨‹ç¼–å†™è¿ç»­çš„æ—¥å¿—æ¶ˆæ¯æµã€‚")]),s._v(" "),a("li",[s._v("æœ€åï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ± ï¼Œå¹¶åœ¨ä¸€ä¸ªå­å­è¿›ç¨‹ä¸­è®°å½•ä¸€æ¡æ¶ˆæ¯ã€‚")])]),s._v(" "),a("p",[s._v("å¦‚æœæˆ‘ä»¬åœ¨Linuxä¸Šè¿è¡Œè¯¥ç¨‹åºï¼Œåˆ™ä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("About to log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".logged\nAbout to log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".logged\nAbout to log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("at this point the program freezes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ä¸ºä»€ä¹ˆè¯¥ç¨‹åºå†»ç»“ï¼Ÿ")]),s._v(" "),a("h2",{attrs:{id:"å¦‚ä½•åœ¨posixï¼ˆä»¥å‰ç§°ä¸ºunixçš„æ ‡å‡†ï¼‰ä¸Šå¯åŠ¨å­æµç¨‹"}},[s._v("å¦‚ä½•åœ¨POSIXï¼ˆä»¥å‰ç§°ä¸ºUnixçš„æ ‡å‡†ï¼‰ä¸Šå¯åŠ¨å­æµç¨‹")]),s._v(" "),a("p",[s._v("è¦äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œæ‚¨éœ€è¦äº†è§£å¦‚ä½•åœ¨POSIXï¼ˆå³Linuxï¼ŒBSDï¼ŒmacOSç­‰ï¼‰ä¸Šå¯åŠ¨å­æµç¨‹ã€‚")]),s._v(" "),a("ol",[a("li",[s._v("ä½¿ç”¨"),a("code",[s._v("fork()")]),s._v("ç³»ç»Ÿè°ƒç”¨åˆ›å»ºè¯¥è¿‡ç¨‹çš„å‰¯æœ¬ã€‚")]),s._v(" "),a("li",[s._v("å­è¿›ç¨‹ä½¿ç”¨"),a("code",[s._v("execve()")]),s._v("ç³»ç»Ÿè°ƒç”¨ï¼ˆæˆ–å…¶å˜ä½“ä¹‹ä¸€ï¼Œä¾‹å¦‚"),a("code",[s._v("execl()")]),s._v("ï¼‰å°†è‡ªå·±æ›¿æ¢ä¸ºå…¶ä»–ç¨‹åºã€‚")])]),s._v(" "),a("p",[s._v("å…³é”®æ˜¯ï¼Œæ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢æ‚¨ä»…åšæŸäº‹"),a("code",[s._v("fork()")]),s._v("ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬"),a("code",[s._v("fork()")]),s._v("ç„¶åæ‰“å°å½“å‰è¿›ç¨‹çš„è¿›ç¨‹IDï¼ˆPIDï¼‰ï¼š")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" os "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" getpid\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I am parent process"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" fork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I am the parent process, with PID"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I am the child process, with PID"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("å½“æˆ‘ä»¬è¿è¡Œå®ƒæ—¶ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("I am parent process 3619\nI am the parent process, with PID 3619\nI am the child process, with PID 3620 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("å¦‚æ‚¨æ‰€è§ï¼Œçˆ¶çº§ï¼ˆPID 3619ï¼‰å’Œå­çº§ï¼ˆPID 3620ï¼‰éƒ½ç»§ç»­è¿è¡Œç›¸åŒçš„Pythonä»£ç ã€‚")]),s._v(" "),a("p",[s._v("è¿™å°±æ˜¯æœ‰è¶£çš„åœ°æ–¹ï¼š- "),a("code",[s._v("fork()")]),s._v("ä»…æ˜¯Pythonåœ¨Linuxä¸Šé»˜è®¤åˆ›å»ºè¿›ç¨‹æ± çš„æ–¹å¼ï¼Œè€Œåœ¨Python 3.7å’Œæ›´æ—©ç‰ˆæœ¬çš„macOSä¸Šåˆ›å»ºè¿›ç¨‹æ± çš„æ–¹å¼ã€‚")]),s._v(" "),a("h2",{attrs:{id:"åªæœ‰è¿™ä¸ªé—®é¢˜fork-ing"}},[s._v("åªæœ‰è¿™ä¸ªé—®é¢˜"),a("code",[s._v("fork()")]),s._v("ING")]),s._v(" "),a("p",[s._v("å¥½çš„ï¼ŒPythonåªéœ€æ‰§è¡Œå³å¯å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ± "),a("code",[s._v("fork()")]),s._v("ã€‚è¿™ä¼¼ä¹å¾ˆæ–¹ä¾¿ï¼šå­è¿›ç¨‹å¯ä»¥è®¿é—®çˆ¶è¿›ç¨‹å†…å­˜ä¸­æ‰€æœ‰å†…å®¹çš„å‰¯æœ¬ï¼ˆå°½ç®¡å­è¿›ç¨‹æ— æ³•å†_æ›´æ”¹_çˆ¶è¿›ç¨‹ä¸­çš„ä»»ä½•å†…å®¹ï¼‰ã€‚ä½†æ˜¯ï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆé€ æˆäº†æˆ‘ä»¬çœ‹åˆ°çš„åƒµå±€ï¼Ÿ")]),s._v(" "),a("p",[s._v("åŸå› æ˜¯åœ¨"),a("code",[s._v("fork()")]),s._v("-without- ä¹‹åç»§ç»­è¿è¡Œä»£ç çš„ä¸¤ä¸ªé—®é¢˜"),a("code",[s._v("execve()")]),s._v("ï¼š")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("fork()")]),s._v(" å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚")]),s._v(" "),a("li",[s._v("ä½†è¿™å¹¶ä¸èƒ½å¤åˆ¶_æ‰€æœ‰å†…å®¹_ã€‚")])]),s._v(" "),a("h3",{attrs:{id:"fork-å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹"}},[a("code",[s._v("fork()")]),s._v(" å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹")]),s._v(" "),a("p",[s._v("æ‰§è¡Œæ—¶"),a("code",[s._v("fork()")]),s._v("ï¼Œå®ƒå°†å¤åˆ¶å†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚è¿™åŒ…æ‹¬æ‚¨åœ¨å¯¼å…¥çš„Pythonæ¨¡å—ä¸­è®¾ç½®çš„æ‰€æœ‰å…¨å±€å˜é‡ã€‚")]),s._v(" "),a("p",[s._v("ä¾‹å¦‚ï¼Œæ‚¨çš„"),a("code",[s._v("logging")]),s._v("é…ç½®ï¼š")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" logging\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" multiprocessing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Pool\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" os "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" getpid\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("runs_in_subprocess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I am the child, with PID {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("basicConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GADZOOKS %(message)s'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DEBUG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I am the parent, with PID {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getpid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" Pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("runs_in_subprocess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("å½“æˆ‘ä»¬è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GADZOOKS I am the parent, with PID 3884\nGADZOOKS I am the child, with PID 3885 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æ³¨æ„æ± ä¸­çš„å­è¿›ç¨‹å¦‚ä½•ç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ—¥å¿—è®°å½•é…ç½®ï¼Œå³ä½¿è¿™ä¸æ˜¯æ‚¨çš„æ„å›¾ï¼æ›´å¹¿æ³›åœ°è®²ï¼Œæ‚¨åœ¨çˆ¶çº§ä¸­åœ¨æ¨¡å—çº§åˆ«é…ç½®çš„_ä»»ä½•å†…å®¹_éƒ½å°†è¢«æ± ä¸­çš„è¿›ç¨‹ç»§æ‰¿ï¼Œè¿™å¯èƒ½å¯¼è‡´æŸäº›æ„å¤–è¡Œä¸ºã€‚")]),s._v(" "),a("h3",{attrs:{id:"ä½†fork-ä¸ä¼šå¤åˆ¶æ‰€æœ‰å†…å®¹"}},[s._v("ä½†"),a("code",[s._v("fork()")]),s._v("ä¸ä¼šå¤åˆ¶æ‰€æœ‰å†…å®¹")]),s._v(" "),a("p",[s._v("ç¬¬äºŒä¸ªé—®é¢˜æ˜¯"),a("code",[s._v("fork()")]),s._v("å®é™…ä¸Šå¹¶æ²¡æœ‰å¤åˆ¶æ‰€æœ‰å†…å®¹ã€‚ç‰¹åˆ«æ˜¯ï¼Œ"),a("code",[s._v("fork()")]),s._v(" _æ²¡æœ‰_å¤åˆ¶çš„ä¸€ä»¶äº‹æ˜¯çº¿ç¨‹ã€‚åœ¨çˆ¶è¿›ç¨‹ä¸­è¿è¡Œçš„ä»»ä½•çº¿ç¨‹åœ¨å­è¿›ç¨‹ä¸­éƒ½ä¸å­˜åœ¨ã€‚")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" threading "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("enumerate")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" os "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fork\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sleep\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start a thread: Thread(target=lambda: sleep(60)).start()")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" fork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The parent process has {} threads"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("enumerate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The child process has {} threads"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("enumerate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("å½“æˆ‘ä»¬è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°å¯åŠ¨çš„çº¿ç¨‹æ— æ³•å¹¸å­˜"),a("code",[s._v("fork()")]),s._v("ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("The parent process has 2 threads\nThe child process has 1 threads \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"è°œå›¢è§£å†³äº†"}},[s._v("è°œå›¢è§£å†³äº†")]),s._v(" "),a("p",[s._v("è¿™å°±æ˜¯åŸå§‹ç¨‹åºé™·å…¥åƒµå±€çš„åŸå› -ç»“åˆå®ƒä»¬çš„åŠ›é‡ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜"),a("code",[s._v("fork()")]),s._v("-åªä¼šäº§ç”Ÿä¸€ä¸ªæ›´å¤§ï¼Œæ›´ä¸¥é‡çš„é—®é¢˜ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("åªè¦çˆ¶è¿›ç¨‹ä¸­çš„çº¿ç¨‹å†™å…¥æ—¥å¿—æ¶ˆæ¯ï¼Œå°±ä¼šå°†å…¶æ·»åŠ åˆ°ä¸­"),a("code",[s._v("Queue")]),s._v("ã€‚è¿™æ¶‰åŠè·å–é”ã€‚")]),s._v(" "),a("li",[s._v("å¦‚æœ"),a("code",[s._v("fork()")]),s._v("åœ¨é”™è¯¯çš„æ—¶é—´å‘ç”Ÿï¼Œåˆ™å°†é”å®šä»¥è·å–çŠ¶æ€å¤åˆ¶ã€‚")]),s._v(" "),a("li",[s._v("å­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹çš„æ—¥å¿—è®°å½•é…ç½®ï¼ˆåŒ…æ‹¬é˜Ÿåˆ—ï¼‰ã€‚")]),s._v(" "),a("li",[s._v("æ¯å½“å­è¿›ç¨‹å†™å…¥æ—¥å¿—æ¶ˆæ¯æ—¶ï¼Œå®ƒå°†å°è¯•å°†å…¶å†™å…¥é˜Ÿåˆ—ã€‚")]),s._v(" "),a("li",[s._v("è¿™æ„å‘³ç€è¦è·å–é”ï¼Œä½†æ˜¯å·²ç»è·å–äº†é”ã€‚")]),s._v(" "),a("li",[s._v("ç°åœ¨ï¼Œå­è¿›ç¨‹ç­‰å¾…é‡Šæ”¾é”ã€‚")]),s._v(" "),a("li",[s._v("æ°¸è¿œä¸ä¼šé‡Šæ”¾è¯¥é”ï¼Œå› ä¸ºä¸ä¼šé‡Šæ”¾è¯¥é”çš„çº¿ç¨‹"),a("code",[s._v("fork()")]),s._v("ã€‚")])]),s._v(" "),a("p",[s._v("ç®€åŒ–å½¢å¼ï¼š")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" os "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" fork\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" threading "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Lock\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Lock is acquired in the parent process: lock = Lock()")]),s._v("\nlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("acquire"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" fork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# In the child process, try to grab the lock:")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Acquiring lock..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    lock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("acquire"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Lock acquired! (This code will never run)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"åˆ›å¯è´´å’Œè§£å†³æ–¹æ³•"}},[s._v("åˆ›å¯è´´å’Œè§£å†³æ–¹æ³•")]),s._v(" "),a("p",[s._v("æœ‰ä¸€äº›å˜é€šåŠæ³•å¯ä»¥ä½¿å®ƒæ›´å¥½ä¸€äº›ã€‚")]),s._v(" "),a("p",[s._v("å¯¹äºæ¨¡å—çŠ¶æ€ï¼Œ"),a("code",[s._v("logging")]),s._v("å½“å­è¿›ç¨‹ç”±å¯åŠ¨æ—¶ï¼Œåº“å¯ä»¥é‡ç½®å…¶é…ç½®"),a("code",[s._v("multiprocessing.Pool")]),s._v("ã€‚ä½†æ˜¯ï¼Œè¿™ä¸èƒ½è§£å†³æ‰€æœ‰_å…¶ä»–_è®¾ç½®æŸç§æ¨¡å—çº§åˆ«å…¨å±€çŠ¶æ€çš„_å…¶ä»–_ Pythonæ¨¡å—å’Œåº“çš„é—®é¢˜ã€‚æ¯ä¸ªè¿™æ ·åšçš„åº“éƒ½éœ€è¦ä¿®å¤æ‰èƒ½ä¸ä¸€èµ·ä½¿ç”¨"),a("code",[s._v("multiprocessing")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("å¯¹äºçº¿ç¨‹ï¼Œå¯ä»¥åœ¨"),a("code",[s._v("fork()")]),s._v("è°ƒç”¨æ—¶å°†é”è®¾ç½®å›é‡Šæ”¾çŠ¶æ€ï¼ˆPythonå¯¹æ­¤æä¾›äº†"),a("a",{attrs:{href:"https://bugs.python.org/issue6721",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç¥¨è¯"),a("OutboundLink")],1),s._v("ã€‚ï¼‰ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸èƒ½è§£å†³Cåº“åˆ›å»ºçš„é”çš„é—®é¢˜ï¼Œå®ƒåªèƒ½è§£å†³Pythonç›´æ¥åˆ›å»ºçš„é”ã€‚å®ƒå¹¶æ²¡æœ‰è§£å†³è¿™æ ·çš„äº‹å®ï¼Œå³æ— è®ºè¿™äº›é”æ˜¯å¦å·²é‡Šæ”¾ï¼Œè¿™äº›é”åœ¨å­è¿›ç¨‹ä¸­å®é™…ä¸Šéƒ½ä¸å†æœ‰æ„ä¹‰ã€‚")]),s._v(" "),a("p",[s._v("å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªæ›´å¥½ï¼Œæ›´è½»æ¾çš„è§£å†³æ–¹æ¡ˆã€‚")]),s._v(" "),a("h2",{attrs:{id:"çœŸæ­£çš„è§£å†³æ–¹æ¡ˆï¼šåœæ­¢fork-æŠ±æ€¨"}},[s._v("çœŸæ­£çš„è§£å†³æ–¹æ¡ˆï¼šåœæ­¢"),a("code",[s._v("fork()")]),s._v("æŠ±æ€¨")]),s._v(" "),a("p",[s._v("åœ¨Python 3ä¸­ï¼Œè¯¥"),a("code",[s._v("multiprocessing")]),s._v("åº“æ·»åŠ äº†å¯åŠ¨å­æµç¨‹çš„æ–°æ–¹æ³•ã€‚å…¶ä¸­ä¸€ä¸ªåšäº†"),a("code",[s._v("fork()")]),s._v("ä¹‹åæ˜¯"),a("code",[s._v("execve()")]),s._v("ä¸€ä¸ªå®Œå…¨æ–°çš„Pythonç¨‹åºã€‚è¿™å°±è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œå› ä¸ºæ¨¡å—çŠ¶æ€ä¸è¢«å­è¿›ç¨‹ç»§æ‰¿ï¼šå®ƒä»å¤´å¼€å§‹ã€‚")]),s._v(" "),a("p",[s._v("å¯ç”¨æ­¤å¤‡ç”¨é…ç½®éœ€è¦åœ¨ç¨‹åºçš„ä»»ä½•å…¶ä»–å¯¼å…¥æˆ–ä½¿ç”¨ä¹‹å‰åªæ›´æ”¹ç¨‹åºä¸­çš„ä¸¤è¡Œä»£ç "),a("code",[s._v("multiprocessing")]),s._v("ã€‚åŸºæœ¬ä¸Šï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºè¦åšçš„ç¬¬ä¸€ä»¶äº‹åº”è¯¥æ˜¯ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('from multiprocessing import set_start_method\nset_start_method("spawn") \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("è¿™ä¼šå…¨å±€æ›´æ”¹ç¨‹åºä¸­æ‰€æœ‰ä»£ç çš„å†…å®¹ï¼Œå› æ­¤ï¼Œå¦‚æœè¦ç»´æŠ¤åº“ï¼Œé‚£ä¹ˆæœ‰ç¤¼è²Œçš„äº‹æƒ…æ˜¯ä»…å¯¹è‡ªå·±çš„æ± ä½¿ç”¨â€œ spawnâ€æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),a("div",{staticClass:"language-py line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" multiprocessing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" get_context\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("your_func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" get_context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spawn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ... everything else is unchanged ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("å°±æ˜¯è¿™æ ·ï¼šè¿™æ ·åšï¼Œæˆ‘ä»¬å·²ç»è§£å†³çš„æ‰€æœ‰é—®é¢˜éƒ½ä¸ä¼šå½±å“æ‚¨ã€‚ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§"),a("a",{attrs:{href:"https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods",target:"_blank",rel:"noopener noreferrer"}},[s._v("ä¸Šä¸‹æ–‡æ–‡æ¡£"),a("OutboundLink")],1),s._v("ã€‚ï¼‰")]),s._v(" "),a("p",[s._v("ä½†è¿™ä»ç„¶éœ€è¦_æ‚¨_å»åšã€‚å¹¶ä¸”å®ƒè¦æ±‚æ¯ä¸ªä¿¡ä»»åœ°éµå¾ªæ–‡æ¡£ä¸­ç¤ºä¾‹çš„Pythonç”¨æˆ·éƒ½è¦å¼„æ¸…æ¥šä¸ºä»€ä¹ˆä»–ä»¬çš„ç¨‹åºæœ‰æ—¶ä¼šå‡ºé”™ã€‚")]),s._v(" "),a("p",[s._v("å½“å‰çš„é»˜è®¤è®¾ç½®å·²è¢«ç ´åï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼ŒPythonä¼šå¯¹æ­¤è¿›è¡Œè®°å½•ï¼Œæˆ–è€…æœ€å¥½å°†å…¶æ›´æ”¹ä¸ºä¸å†æ˜¯é»˜è®¤è®¾ç½®ã€‚")]),s._v(" "),a("h2",{attrs:{id:"äº†è§£æ›´å¤š"}},[s._v("äº†è§£æ›´å¤š")]),s._v(" "),a("p",[s._v("æˆ‘åœ¨è¿™é‡Œçš„è§£é‡Šå½“ç„¶æœ‰æ‰€ç®€åŒ–ï¼šä¾‹å¦‚ï¼Œé™¤äº†çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çŠ¶æ€"),a("code",[s._v("fork()")]),s._v("æ— æ³•å¤åˆ¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…¶ä»–èµ„æºï¼š")]),s._v(" "),a("ul",[a("li",[s._v("é˜…è¯»"),a("a",{attrs:{href:"http://man7.org/linux/man-pages/man2/fork.2.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linuxæ‰‹å†Œé¡µ"),a("OutboundLink")],1),s._v("çš„"),a("code",[s._v("fork()")]),s._v("äº†è§£å…¶ä»–çš„ä¸œè¥¿å®ƒä¸ä¼šå¤åˆ¶ã€‚")]),s._v(" "),a("li",[s._v("é›·åˆ‡å°”ç”±æ¹¾ä¸Šå"),a("a",{attrs:{href:"https://rachelbythebay.com/w/2011/06/07/forked/",target:"_blank",rel:"noopener noreferrer"}},[s._v("ä¸ºä»€ä¹ˆçº¿ç¨‹å’Œè¿›ç¨‹ä¸è¦æ··ç”¨"),a("OutboundLink")],1),s._v("å’Œ"),a("a",{attrs:{href:"https://rachelbythebay.com/w/2014/08/16/forkenv/",target:"_blank",rel:"noopener noreferrer"}},[s._v("ä¸€ä¸ªåç»­"),a("OutboundLink")],1),s._v("æ˜¯ï¼Œæˆ‘åŸæ¥äº†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¾ˆå¿«å¿˜è®°äº†è¿™ä»¶äº‹ï¼Œç›´åˆ°æˆ‘åœ¨ç”Ÿäº§ä»£ç ä¸­é‡åˆ°ç›¸å…³é—®é¢˜ã€‚")]),s._v(" "),a("li",[s._v("å¯¹æ‚¨"),a("a",{attrs:{href:"https://mathemagicalconservation.wordpress.com/2017/02/10/the-real-risk-of-dying-from-shark-attacks-vs-car-accidents-the-importance-of-basic-fractions/",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¢«é²¨é±¼"),a("OutboundLink")],1),a("a",{attrs:{href:"https://mathemagicalconservation.wordpress.com/2018/01/15/risk-of-death-by-sharks-vs-walking/",target:"_blank",rel:"noopener noreferrer"}},[s._v("åé£Ÿçš„"),a("OutboundLink")],1),s._v("å¯èƒ½æ€§è¿›è¡Œçš„æ•°å­¦åˆ†æå’Œ"),a("a",{attrs:{href:"https://mathemagicalconservation.wordpress.com/2018/01/15/risk-of-death-by-sharks-vs-walking/",target:"_blank",rel:"noopener noreferrer"}},[s._v("åç»­è¡ŒåŠ¨"),a("OutboundLink")],1),s._v("ã€‚")])]),s._v(" "),a("p",[s._v("ä¿æŒå®‰å…¨ï¼Œå¹¶æ³¨æ„é²¨é±¼å’Œçº¿ç¨‹ä¸è¿›ç¨‹ä¹‹é—´çš„ä¸è‰¯äº¤äº’ï¼ğŸ¦ˆğŸ¦‘")]),s._v(" "),a("blockquote",[a("p",[s._v("æ„Ÿè°¢Terry ReedyæŒ‡å‡ºäº†éœ€æ±‚"),a("code",[s._v("if __name__ == '__main__'")]),s._v("ã€‚")])])])}),[],!1,null,null,null);t.default=e.exports}}]);