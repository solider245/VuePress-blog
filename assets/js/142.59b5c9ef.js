(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{367:function(s,n,a){"use strict";a.r(n);var t=a(25),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1、运维自动化发展历程及技术应用"}},[s._v("1、运维自动化发展历程及技术应用")])]),a("li",[a("a",{attrs:{href:"#_3、ansible特性"}},[s._v("3、ansible特性")])]),a("li",[a("a",{attrs:{href:"#_4、ansible架构及工作原理"}},[s._v("4、ansible架构及工作原理")])]),a("li",[a("a",{attrs:{href:"#_5、ansible主要组成部分"}},[s._v("5、ansible主要组成部分")])]),a("li",[a("a",{attrs:{href:"#_6、ansible命令执行来源："}},[s._v("6、Ansible命令执行来源：")])]),a("li",[a("a",{attrs:{href:"#_8、安装（本机采用rpm安装，实验）"}},[s._v("8、安装（本机采用rpm安装，实验）")])]),a("li",[a("a",{attrs:{href:"#_9、相关文件"}},[s._v("9、相关文件")])]),a("li",[a("a",{attrs:{href:"#_10、ansible系列命令-ansible-ansible-doc-ansible-playbook-ansible-vault-ansible-console-ansible-galaxy-ansible-pull-ansible-doc-显示模块帮助-ansible-doc-options-module"}},[s._v("10、Ansible系列命令  \nansible ansible-doc ansible-playbook ansible-vault ansible-console ansible-galaxy ansible-pull  \nansible-doc 显示模块帮助  \nansible-doc \\[options\\] \\[module...\\]")])]),a("li",[a("a",{attrs:{href:"#_11、ansible命令执行过程"}},[s._v("11、Ansible命令执行过程")])]),a("li",[a("a",{attrs:{href:"#_12、ansible常见模块"}},[s._v("12、Ansible常见模块")])])])]),a("p"),s._v(" "),a("p",[a("img",{attrs:{src:"https://p3-tt.byteimg.com/large/pgc-image/834dc27cf3ae4ac5b95cadc614d6ebdf?from=pc",alt:""}})]),s._v(" "),a("h1",{attrs:{id:"_1、运维自动化发展历程及技术应用"}},[s._v("1、运维自动化发展历程及技术应用")]),s._v(" "),a("ul",[a("li",[s._v("本地部署：On-Premises")]),s._v(" "),a("li",[s._v("基础设施即服务：IaaS（Infrastructure as a Service）")]),s._v(" "),a("li",[s._v("平台即服务：PaaS（Platform as a Service）")]),s._v(" "),a("li",[s._v("软件即服务：SaaS（Software as a Service）")])]),s._v(" "),a("p",[s._v("2、自动化运维应用场景")]),s._v(" "),a("p",[s._v("1>文件传输")]),s._v(" "),a("p",[s._v("2>命令执行")]),s._v(" "),a("ul",[a("li",[s._v("应用部署")]),s._v(" "),a("li",[s._v("配置管理")]),s._v(" "),a("li",[s._v("任务流编排")])]),s._v(" "),a("p",[s._v("3>程序发布")]),s._v(" "),a("p",[s._v("预发布：新版本的代码先发布到服务器（跟线上环境完全相同，只是未接入调度器）")]),s._v(" "),a("p",[s._v("程序发布：不能导致系统故障或造成系统完全不可用；不能影响用户体验")]),s._v(" "),a("p",[s._v("灰度发布：先发布1/10的服务器，面向少量精准用户，在逐渐增多")]),s._v(" "),a("p",[s._v("发布路径：")]),s._v(" "),a("ul",[a("li",[s._v("/nginx1.1")]),s._v(" "),a("li",[s._v("nginx（软链接）")]),s._v(" "),a("li",[s._v("/nginx1.2")]),s._v(" "),a("li",[s._v("在调度机上将一台 real-server 置为 down，停止旧版本的服务，删除旧的软链接，启动新的服务，创建新的软链接，在调度器启用这一批服务器")])]),s._v(" "),a("p",[s._v("自动化灰度发布：脚本、发布平台")]),s._v(" "),a("h1",{attrs:{id:"_3、ansible特性"}},[s._v("3、ansible特性")]),s._v(" "),a("p",[s._v("1>模块化，有Paramiko,PyYAML,jinja2（模块语言）三个关键模块，支持自定义模块")]),s._v(" "),a("p",[s._v("2>基于Python语言实现，部署简单，基于python和ssh（默认安装），安全、agentless（无代理，不需要配置代理，主控端直接控制被控端）")]),s._v(" "),a("p",[s._v("3>支持playbook编排任务")]),s._v(" "),a("p",[s._v("4>幂等性：一个任务执行1遍和执行n遍效果一样，不因重复执行带来意外情况")]),s._v(" "),a("p",[s._v("5>无需代理不依赖PKI（无需ssl）")]),s._v(" "),a("p",[s._v("6>可使用任何编程语言写模块")]),s._v(" "),a("p",[s._v("7>YAML格式，编排任务，支持丰富的数据结构")]),s._v(" "),a("p",[s._v("8>较强大的多层解决方案（角色）")]),s._v(" "),a("h1",{attrs:{id:"_4、ansible架构及工作原理"}},[s._v("4、ansible架构及工作原理")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-tt.byteimg.com/large/pgc-image/b47c78a32efd4b0ead48f92998d0bac9?from=pc",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-tt.byteimg.com/large/pgc-image/e3e3e95d095544e7a3593366c4acf987?from=pc",alt:""}})]),s._v(" "),a("h1",{attrs:{id:"_5、ansible主要组成部分"}},[s._v("5、ansible主要组成部分")]),s._v(" "),a("p",[s._v("ansible playbook：任务剧本(任务集)，编排定义Ansible任务集的配置文件，由Ansible顺序依次执行，通常是JSON格式的YML文件")]),s._v(" "),a("p",[s._v("inventory：Ansible管理主机的清单/etc/anaible/hosts")]),s._v(" "),a("p",[s._v("modules：Ansible执行命令的功能模块，多数为内置核心模块，也可自定义")]),s._v(" "),a("p",[s._v("plugins：模块功能的补充,如连接类型插件、循环插件、变量插件、过滤插件等，该功能不常用")]),s._v(" "),a("p",[s._v("API：供第三方程序调用的应用程序编程接口")]),s._v(" "),a("p",[s._v("ANSIBLE：组合INVENTORY、API、 MODULES、PLUGINS的绿框，可以理解为是ansible命令工具，其为核心执行工具")]),s._v(" "),a("h1",{attrs:{id:"_6、ansible命令执行来源："}},[s._v("6、Ansible命令执行来源：")]),s._v(" "),a("p",[s._v("USER，普通用户，即SYSTEM ADMINISTRATOR")]),s._v(" "),a("p",[s._v("CMDB (配置管理数据库) API 调用")]),s._v(" "),a("p",[s._v("PUBLIC/PRIVATE CLOUD API调用")]),s._v(" "),a("p",[s._v("USER → Ansible Playbook → Ansibile")]),s._v(" "),a("p",[s._v("7、利用ansible实现管理的方式：")]),s._v(" "),a("p",[s._v("Ad-Hoc即ansible命令，主要用于临时命令使用场景")]),s._v(" "),a("p",[s._v("Ansible-playbook主要用于长期规划好的，大型项目的场景，需要有前提的规划")]),s._v(" "),a("p",[s._v("Ansible-playbook (剧本) 执行过程：")]),s._v(" "),a("ul",[a("li",[s._v("将已有编排好的任务集写入Ansible-Playbook")]),s._v(" "),a("li",[s._v("通过ansible-playbook命令分拆任务集至逐条ansible命令，按预定规则逐条执行")])]),s._v(" "),a("p",[s._v("Ansible主要操作对象：")]),s._v(" "),a("ul",[a("li",[s._v("HOSTS主机")]),s._v(" "),a("li",[s._v("NETWORKING网络设备")])]),s._v(" "),a("p",[s._v("注意事项：")]),s._v(" "),a("p",[s._v("➢执行ansible的主机一般称为主控端，中控，master或堡垒机")]),s._v(" "),a("p",[s._v("➢主控端Python版本需要2.6或以上")]),s._v(" "),a("p",[s._v("➢被控端Python版本小于2.4需要安装python-simplejson")]),s._v(" "),a("p",[s._v("➢被控端如开启SELinux需要安装libselinux-python")]),s._v(" "),a("p",[s._v("➢windows不能做为主控端")]),s._v(" "),a("h1",{attrs:{id:"_8、安装（本机采用rpm安装，实验）"}},[s._v("8、安装（本机采用rpm安装，实验）")]),s._v(" "),a("p",[s._v("1>rpm包安装：EPEL源")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install ansible -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2>编译安装：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum -y install python-jinja2 PyYAML python-paramiko python-babel python-crypto  \ntar xf ansible-1.5.4.tar.gz  \ncd ansible-1.5.4  \npython setup.py build  \npython setup.py install  \nmkdir /etc/ansible  \ncp -r examples/* /etc/ansible\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("3>Git方式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("git clone git://github.com/ansible/ansible.git --recursive  \ncd ./ansible  \nsource ./hacking/env-setup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("4>pip安装：pip是安装Python包的管理器，类似yum")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install python-pip python-devel  \nyum install gcc glibc-devel zibl-devel rpm-bulid openssl-devel  \npip install --upgrade pip  \npip install ansible --upgrade\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("5>确认安装: ansible --version")]),s._v(" "),a("h1",{attrs:{id:"_9、相关文件"}},[s._v("9、相关文件")]),s._v(" "),a("p",[s._v("1>配置文件")]),s._v(" "),a("ul",[a("li",[s._v("/etc/ansible/ansible.cfg 主配置文件，配置ansible工作特性")]),s._v(" "),a("li",[s._v("/etc/ansible/hosts 主机清单")]),s._v(" "),a("li",[s._v("/etc/ansible/roles/ 存放角色的目录")])]),s._v(" "),a("p",[s._v("2>程序")]),s._v(" "),a("ul",[a("li",[s._v("/usr/bin/ansible 主程序，临时命令执行工具")]),s._v(" "),a("li",[s._v("/usr/bin/ansible-doc 查看配置文档，模块功能查看工具")]),s._v(" "),a("li",[s._v("/usr/bin/ansible-galaxy 下载/上传优秀代码或Roles模块的官网平台")]),s._v(" "),a("li",[s._v("/usr/bin/ansible-playbook 定制自动化任务，编排剧本工具/usr/bin/ansible-pull远程执行命令的工具")]),s._v(" "),a("li",[s._v("/usr/bin/ansible-vault 文件加密工具")]),s._v(" "),a("li",[s._v("/usr/bin/ansible-console 基于Console界面与用户交互的执行工具")])]),s._v(" "),a("p",[s._v("3>主机清单inventory")]),s._v(" "),a("ul",[a("li",[s._v("Inventory主机清单")]),s._v(" "),a("li",[s._v("ansible的主要功用在于批量主机操作，为了便捷地使用其中的部分主机，可以在inventory file中将其分组命名")]),s._v(" "),a("li",[s._v("默认的inventory file为/etc/ansible/hosts")]),s._v(" "),a("li",[s._v("inventory file可以有多个，且也可以通过Dynamic Inventory来动态生成")])]),s._v(" "),a("p",[s._v("4>/etc/ansible/hosts文件格式")]),s._v(" "),a("p",[s._v("inventory文件遵循INI文件风格，中括号中的字符为组名。可以将同一个主机同时归并到多个不同的组中；此外，当如若目标主机使用了非默认的SSH端口，还可以在主机名称之后使用冒号加端口号来标明")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#vim /etc/ansible/hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://p1-tt.byteimg.com/large/pgc-image/f3dfc47c6df2463ebfa65678e714f4e0?from=pc",alt:""}})]),s._v(" "),a("p",[s._v("也可以配置域名解析，使用域名代替ip，如果ssh默认端口号有改动不是22端口，则 ip/域名:端口")]),s._v(" "),a("p",[s._v("Ansible配置文件　　Ansible配置文件/etc/ansible/ansible.cfg (一般保持默认)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[defaults]  \n#inventory = /etc/ansible/hosts     #主机列表配置文件  \n#library = /usr/share/my_modules/   #库文件存放目录  \n#remote_tmp = $HOME/.ansible/tmp    #临时py命令文件存放在远程主机目录  \n#local_tmp = $HOME/.ansible/tmp     #本机的临时命令执行目录  \n#forks = 5                          #默认并发数  \n#sudo_user = root                   #默认sudo用户  \n#ask_sudo_pass = True               #每次执行ansible命令是否询问ssh密码  \n#ask_pass = True  \n#remote_port = 22  \n#host_key_checking = False          #检查对应服务器的host_key，建议取消注释，要不然得先建立连接（/root/.ssh/known_hosts）Ansible才能连接成功  \n#log_path=/var/log/ansible.log      #日志文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("Ansible配置文件保持默认，建议开启：host_key_checking = False，log_path=/var/log/ansible.log")]),s._v(" "),a("h1",{attrs:{id:"_10、ansible系列命令ansible-ansible-doc-ansible-playbook-ansible-vault-ansible-console-ansible-galaxy-ansible-pullansible-doc-显示模块帮助ansible-doc-options-module"}},[s._v("10、Ansible系列命令"),a("br"),s._v("\nansible ansible-doc ansible-playbook ansible-vault ansible-console ansible-galaxy ansible-pull"),a("br"),s._v("\nansible-doc 显示模块帮助"),a("br"),s._v("\nansible-doc [options] [module...]")]),s._v(" "),a("ul",[a("li",[s._v("-a 显示所有模块的文档")]),s._v(" "),a("li",[s._v("-l,--list 列出可用模块")]),s._v(" "),a("li",[s._v("-s,--snippet显示指定模块的playbook片段")])]),s._v(" "),a("p",[s._v("示例:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ansible-doc -l      列出所有模块  \nansible-doc ping    查看指定模块帮助用法  \nansible-doc -s ping 查看指定模块帮助用法（短帮助）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ansible通过ssh实现配置管理、应用部署、任务执行等功能，建议配置ansible端能基于密钥认证的方式联系各被管理节点"),a("br"),s._v("\n　　ansible "),a("host-pattern",[s._v(" [-m module_name] [-a args]"),a("br"),s._v("\n　　　　--version显示版本"),a("br"),s._v("\n　　　　-m module指定模块，默认为command"),a("br"),s._v("\n　　　　-v详细过程-vv -vvv更详细"),a("br"),s._v("\n　　　　--list-hosts显示主机列表,可简写-list"),a("br"),s._v("\n　　　　-k, --ask-pass提示输入ssh连接密码，默认Key验证"),a("br"),s._v("\n　　　　-K, --ask-become-pass提示输入sudo时的口令"),a("br"),s._v("\n　　　　-C, --check检查，并不执行"),a("br"),s._v("\n　　　　-T, --timeout=TIMEOUT执行命令的超时时间，默认10s"),a("br"),s._v("\n　　　　-u, --user=REMOTE_USER执行远程执行的用户"),a("br"),s._v("\n　　　　-b, --become代替旧版的sudo切换")])],1),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible 192.168.100.10 -m ping -k    #-m:指定模块，-k:指定k口令验证  \nSSH password:   \n192.168.100.10 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n  \n[root@ansible ~]#ansible all --list    #列出主机列表  \n  hosts (2):  \n    192.168.100.10  \n    192.168.100.20  \n[root@ansible ~]#ansible all -m ping -u yang -k    #以yang用户身份执行ping  \nSSH password:   \n192.168.100.20 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n192.168.100.10 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n[root@ansible ~]#ansible all -k -u yang -b -K -m command -a \'ls /root\'    #以yang用户身份执行ls /root，-b即sudo切换身份，-K输入sudo时的口令  \nSSH password:   \nBECOME password[defaults to SSH password]:   \n192.168.100.20 | CHANGED | rc=0 >>  \nanaconda-ks.cfg  \njdk-8u221-linux-x64.tar.gz  \n192.168.100.10 | CHANGED | rc=0 >>  \nanaconda-ks.cfg  \n  \n  \n设置基于key验证：  \n[root@ansible ~]#ssh-keygen  \nGenerating public/private rsa key pair.  \nEnter file in which to save the key (/root/.ssh/id_rsa):     #设置空，为了安全建议进行进一步设置  \nEnter passphrase (empty for no passphrase):                  #设置空  \nEnter same passphrase again:                                 #设置空  \nYour identification has been saved in /root/.ssh/id_rsa.  \nYour public key has been saved in /root/.ssh/id_rsa.pub.  \nThe key fingerprint is:  \nSHA256:nHRFKqBQ/jceNpkOFfoVLKbE+hVchYw25FKG8m3eFeM root@ansible.localdomain  \nThe key\'s randomart image is:  \n+---[RSA 2048]----+  \n|  .....+==o++    |  \n|   o..+*O.++o    |  \n|    o=o==++. o   |  \n|    ..o*+B  E    |  \n|     .o+S. .     |  \n|      .*.+.      |  \n|        o        |  \n|                 |  \n|                 |  \n+----[SHA256]-----+  \n[root@ansible ~]#ssh-copy-id 192.168.100.10    #拷贝至192.168.100.10  \n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"  \n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed  \n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys  \nroot@192.168.100.10\'s password:   \n  \nNumber of key(s) added: 1  \n  \nNow try logging into the machine, with:   "ssh \'192.168.100.10\'"  \nand check to make sure that only the key(s) you wanted were added.  \n  \n[root@ansible ~]#ssh-copy-id 192.168.100.20    #拷贝至192.168.100.20  \n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"  \n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed  \n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys  \nroot@192.168.100.20\'s password:   \n  \nNumber of key(s) added: 1  \n  \nNow try logging into the machine, with:   "ssh \'192.168.100.20\'"  \nand check to make sure that only the key(s) you wanted were added.  \n  \n[root@ansible ~]#ansible all -m ping    #基于key验证不需要在输入key口令  \n192.168.100.20 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n192.168.100.10 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#ansible all --list  \n  hosts (2):  \n    192.168.100.10  \n    192.168.100.20\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("*：通配符"),a("br"),s._v('\n　　ansible "*" -m ping'),a("br"),s._v("\n　　ansible 192.168.100.* -m ping"),a("br"),s._v('\n　　ansible "*server" -m ping')]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible *server -m ping  \n192.168.100.20 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n192.168.100.10 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("或关系"),a("br"),s._v('\n　　ansible "webserver:dbserver" -m ping'),a("br"),s._v('\n　　ansible "192.168.100.10:192.168.100.20" -m ping')]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible "webserver:dbserver" -m ping  \n192.168.100.20 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}  \n192.168.100.10 | SUCCESS => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": false,   \n    "ping": "pong"  \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("逻辑与"),a("br"),s._v('\n　　ansible "webserver:&dbserver" -m ping'),a("br"),s._v("\n　　在webserver组并且在dbserver组中的主机"),a("br"),s._v("\n　　逻辑非"),a("br"),s._v("\n　　ansible 'webserver:!dbserver' -m ping"),a("br"),s._v("\n　　在webserver组，但不在dbserver组中的主机"),a("br"),s._v("\n　　注意：此处为单引号"),a("br"),s._v("\n　　综合逻辑"),a("br"),s._v("\n　　ansible 'webserver:dbserver:&appserver:!ftpserver' -m ping"),a("br"),s._v("\n　　正则表达式"),a("br"),s._v('\n　　ansible "webserver:&dbserver" -m ping'),a("br"),s._v("\n　　ansible“ ~(web|db).*\\.yang\\.com”-m ping")]),s._v(" "),a("h1",{attrs:{id:"_11、ansible命令执行过程"}},[s._v("11、Ansible命令执行过程")]),s._v(" "),a("p",[s._v("1.加载自己的配置文件默认/etc/ansible/ansible.cfg"),a("br"),s._v("\n　　2.加载自己对应的模块文件，如command"),a("br"),s._v("\n　　3.通过ansible将模块或命令生成对应的临时py文件，并将该文件传输至远程服务器的对应执行用户$HOME/.ansible/tmp/ansible-tmp-数字/XXX.PY文件"),a("br"),s._v("\n　　4.给文件+x执行"),a("br"),s._v("\n　　5.执行并返回结果"),a("br"),s._v("\n　　6.删除临时py文件，sleep 0退出"),a("br"),s._v("\n　　执行状态："),a("br"),s._v("\n　　　　绿色：执行成功并且不需要做改变的操作"),a("br"),s._v("\n　　　　黄色：执行成功并且对目标主机做变更"),a("br"),s._v("\n　　　　红色：执行失败")]),s._v(" "),a("h1",{attrs:{id:"_12、ansible常见模块"}},[s._v("12、Ansible常见模块")]),s._v(" "),a("p",[s._v("各种模块的使用，可以ansible-doc -s service先查看帮助，再进行使用　　1>command模块：在远程主机执行命令，默认模块，可忽略-m选项")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#ansible all -m command -a 'hostname'  \n192.168.100.20 | CHANGED | rc=0 >>  \nnode-2  \n192.168.100.10 | CHANGED | rc=0 >>  \nnode-1  \n[root@ansible ~]#ansible all -m command -a 'echo yang | passwd --stdin yang'  \n192.168.100.20 | CHANGED | rc=0 >>  \nyang | passwd --stdin yang    #没有成功，当字符串打印出来了  \n192.168.100.10 | CHANGED | rc=0 >>  \nyang | passwd --stdin yang    #没有成功，当字符串打印出来了\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("此命令不支持$VARNAME < > | ; & 等，需要使用shelI模块实现")]),s._v(" "),a("p",[s._v("2>shell模块：和command相似，用shell执行命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#ansible all -m shell -a 'echo yang | passwd --stdin yang'  \n192.168.100.20 | CHANGED | rc=0 >>  \n更改用户 yang 的密码 。  \npasswd：所有的身份验证令牌已经成功更新。  \n192.168.100.10 | CHANGED | rc=0 >>  \n更改用户 yang 的密码 。  \npasswd：所有的身份验证令牌已经成功更新。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("调用bash执行命令类似cat /tmp/stanley.md | awk -F'|' '{print $1,$2}' &>/tmp/example.txt 这些复杂命令，即使使用shell也可能会失败，解决办法：写到脚本，copy到远程，执行，再把需要的结果拉回执行命令的机器")]),s._v(" "),a("p",[s._v('3>script模块：运行脚本　　-a "/PATH/TO/SCRIPT_FILE"')]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#./hello.sh     #当前Ansible机器上的脚本：实现打印hello，输出主机名  \nhello  \nmy hostname is ansible.localdomain  \n[root@ansible ~]#ansible all -m script -a \'/root/hello.sh\'  \n192.168.100.20 | CHANGED => {  \n    "changed": true,   \n    "rc": 0,   \n    "stderr": "Shared connection to 192.168.100.20 closed.\\r\\n",   \n    "stderr_lines": [  \n        "Shared connection to 192.168.100.20 closed."  \n    ],   \n    "stdout": "hello\\r\\nmy hostname is node2.localdomain\\r\\n",   \n    "stdout_lines": [  \n        "hello",   \n        "my hostname is node2.localdomain"  \n    ]  \n}  \n192.168.100.10 | CHANGED => {  \n    "changed": true,   \n    "rc": 0,   \n    "stderr": "Shared connection to 192.168.100.10 closed.\\r\\n",   \n    "stderr_lines": [  \n        "Shared connection to 192.168.100.10 closed."  \n    ],   \n    "stdout": "hello\\r\\nmy hostname is node1.localdomain\\r\\n",   \n    "stdout_lines": [  \n        "hello",   \n        "my hostname is node1.localdomain"  \n    ]  \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("4>copy模块：从服务器复制文件到客户端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible all -m copy -a \'src=/root/hello.sh dest=/root/\'    #src:指定源文件  dest:指定目标文件存放目录  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "checksum": "63ff849c6cde8cd1eef04e0472e832d8407eca00",   \n    "dest": "/root/hello.sh",   \n    "gid": 0,   \n    "group": "root",   \n    "md5sum": "c426adca4193658a2183f59d726cc2dc",   \n    "mode": "0644",   \n    "owner": "root",   \n    "size": 58,   \n    "src": "/root/.ansible/tmp/ansible-tmp-1584450232.18-80008690840068/source",   \n    "state": "file",   \n    "uid": 0  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "checksum": "63ff849c6cde8cd1eef04e0472e832d8407eca00",   \n    "dest": "/root/hello.sh",   \n    "gid": 0,   \n    "group": "root",   \n    "md5sum": "c426adca4193658a2183f59d726cc2dc",   \n    "mode": "0644",   \n    "owner": "root",   \n    "size": 58,   \n    "src": "/root/.ansible/tmp/ansible-tmp-1584450232.14-44687748938829/source",   \n    "state": "file",   \n    "uid": 0  \n}  \n  \nnode1节点查看：  \n[root@node1 ~]# ll  \ntotal 8  \n-rw-------. 1 root root 1557 Sep 28 22:49 anaconda-ks.cfg  \n-rw-r--r--  1 root root   58 Mar 17 21:03 hello.sh  \n  \n删除node节点的hello.sh文件，重新创建个同名文件，再使用ansible复制，如目标存在，默认覆盖，此处backup=yes指定先备份（ansible有幂等性特点）  \n[root@ansible ~]#ansible all -m copy -a \'src=/root/hello.sh dest=/root/ backup=yes mode=+x\'    #src:指定源文件 dest:指定目标文件存放目录 backup=yes:如果目标文件存在则进行备份  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "checksum": "63ff849c6cde8cd1eef04e0472e832d8407eca00",   \n    "dest": "/root/hello.sh",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0755",   \n    "owner": "root",   \n    "path": "/root/hello.sh",   \n    "size": 58,   \n    "state": "file",   \n    "uid": 0  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "checksum": "63ff849c6cde8cd1eef04e0472e832d8407eca00",   \n    "dest": "/root/hello.sh",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0755",   \n    "owner": "root",   \n    "path": "/root/hello.sh",   \n    "size": 58,   \n    "state": "file",   \n    "uid": 0  \n}  \n  \n  \n[root@ansible ~]#ansible all -a \'ls /root/\'  \n192.168.100.20 | CHANGED | rc=0 >>  \nanaconda-ks.cfg  \nhello.sh  \nhello.sh.4160.2020-03-17@21:14:23~    #原文件存在，被备份  \njdk-8u221-linux-x64.tar.gz  \n192.168.100.10 | CHANGED | rc=0 >>  \nanaconda-ks.cfg  \nhello.sh  \nhello.sh.4604.2020-03-17@21:14:22~    #原文件存在，被备份\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br")])]),a("p",[s._v("5>Fetch模块：从客户端取文件至服务器端，copy相反，目录可先tar")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#mkdir /data    #先创建一个/data目录，存放抓取过来的文件  \n[root@ansible ~]#ansible all -m fetch -a \'src=/root/anaconda-ks.cfg dest=/data\'  \n192.168.100.10 | CHANGED => {  \n    "changed": true,   \n    "checksum": "c324508ffa651d64f4fa6286fb74ec438e283b3b",   \n    "dest": "/data/192.168.100.10/root/anaconda-ks.cfg",   \n    "md5sum": "b1c0bd6a556fac4e120fddcc7d1124df",   \n    "remote_checksum": "c324508ffa651d64f4fa6286fb74ec438e283b3b",   \n    "remote_md5sum": null  \n}  \n192.168.100.20 | CHANGED => {  \n    "changed": true,   \n    "checksum": "4a2e5b1e34c5496d9dcebbb9a1b7ece8b6b03950",   \n    "dest": "/data/192.168.100.20/root/anaconda-ks.cfg",   \n    "md5sum": "32435d070271e8018672e21ae7c2acbb",   \n    "remote_checksum": "4a2e5b1e34c5496d9dcebbb9a1b7ece8b6b03950",   \n    "remote_md5sum": null  \n}  \n[root@ansible ~]#tree /data/  \n/data/  \n├── 192.168.100.10  \n│   └── root  \n│       └── anaconda-ks.cfg  \n└── 192.168.100.20  \n └── root  \n └── anaconda-ks.cfg  \n  \n4 directories, 2 files\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("6>File模块：设置文件属性")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible all -a \'ls /data\'  \n192.168.100.20 | FAILED | rc=2 >>  \nls: 无法访问/data: 没有那个文件或目录non-zero return code  \n192.168.100.10 | FAILED | rc=2 >>  \nls: 无法访问/data: 没有那个文件或目录non-zero return code  \n[root@ansible ~]#ansible all -m shell -a \'mkdir /data\'    #可以看到我们使用shell，创建目录，建议我们使用file模块创建目录  \n[WARNING]: Consider using the file module with state=directory rather than running  \n\'mkdir\'.  If you need to use command because file is insufficient you can add  \n\'warn: false\' to this command task or set \'command_warnings=False\' in ansible.cfg  \nto get rid of this message.  \n192.168.100.10 | CHANGED | rc=0 >>  \n  \n192.168.100.20 | CHANGED | rc=0 >>  \n  \n[root@ansible ~]#ansible all -a \'ls /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n  \n192.168.100.10 | CHANGED | rc=0 >>  \n  \n[root@ansible ~]#ansible all -m file -a \'name=/data/f1 state=touch\'    #在创建的/data目录下，使用file模块创建文件，state=touch:状态=touch 创建  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "dest": "/data/f1",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0644",   \n    "owner": "root",   \n    "size": 0,   \n    "state": "file",   \n    "uid": 0  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "dest": "/data/f1",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0644",   \n    "owner": "root",   \n    "size": 0,   \n    "state": "file",   \n    "uid": 0  \n}  \n[root@ansible ~]#ansible all -a \'ls /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \nf1  \n192.168.100.10 | CHANGED | rc=0 >>  \nf1  \n[root@ansible ~]#ansible all -m file -a \'name=/data/f1 state=absent\'    #absent删除文件  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/f1",   \n    "state": "absent"  \n}  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/f1",   \n    "state": "absent"  \n}  \n[root@ansible ~]#ansible all -a \'ls /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n  \n192.168.100.10 | CHANGED | rc=0 >>  \n  \n[root@ansible ~]#ansible all -m file -a \'name=/data/dir1 state=directory\'    #directory创建目录  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0755",   \n    "owner": "root",   \n    "path": "/data/dir1",   \n    "size": 6,   \n    "state": "directory",   \n    "uid": 0  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0755",   \n    "owner": "root",   \n    "path": "/data/dir1",   \n    "size": 6,   \n    "state": "directory",   \n    "uid": 0  \n}  \n[root@ansible ~]#ansible all -a \'ls -l /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n总用量 0  \ndrwxr-xr-x 2 root root 6 3月  17 22:29 dir1  \n192.168.100.10 | CHANGED | rc=0 >>  \n总用量 0  \ndrwxr-xr-x 2 root root 6 3月  17 22:29 dir1  \n[root@ansible ~]#ansible all -m file -a \'name=/data/dir1 state=absent\'    #删除目录  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/dir1",   \n    "state": "absent"  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/dir1",   \n    "state": "absent"  \n}  \n[root@ansible ~]#ansible all -a \'ls /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n  \n192.168.100.10 | CHANGED | rc=0 >>  \n  \n[root@ansible ~]#ansible all -m file -a \'src=/etc/fstab dest=/data/fstab.link state=link\'    #src,dest指定源文件，目标文件，link：创建软链接  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "dest": "/data/fstab.link",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0777",   \n    "owner": "root",   \n    "size": 10,   \n    "src": "/etc/fstab",   \n    "state": "link",   \n    "uid": 0  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "dest": "/data/fstab.link",   \n    "gid": 0,   \n    "group": "root",   \n    "mode": "0777",   \n    "owner": "root",   \n    "size": 10,   \n    "src": "/etc/fstab",   \n    "state": "link",   \n    "uid": 0  \n}  \n[root@ansible ~]#ansible all -a \'ls -l /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n总用量 0  \nlrwxrwxrwx 1 root root 10 3月  17 22:31 fstab.link -> /etc/fstab  \n192.168.100.10 | CHANGED | rc=0 >>  \n总用量 0  \nlrwxrwxrwx 1 root root 10 3月  17 22:31 fstab.link -> /etc/fstab  \n[root@ansible ~]#ansible all -m file -a \'dest=/data/fstab.link state=absent\'    #删除软链接  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/fstab.link",   \n    "state": "absent"  \n}  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "path": "/data/fstab.link",   \n    "state": "absent"  \n}  \n[root@ansible ~]#ansible all -a \'ls -l /data\'  \n192.168.100.20 | CHANGED | rc=0 >>  \n总用量 0  \n192.168.100.10 | CHANGED | rc=0 >>  \n总用量 0\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br")])]),a("p",[s._v("7>Hostname模块：管理主机名")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('node-1节点先查看主机名：  \n[root@node-1 ~]# hostname  \nnode-1  \n  \n[root@ansible ~]#ansible 192.168.100.10 -m hostname -a \'name=node1\'  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "ansible_domain": "",   \n        "ansible_fqdn": "node1",   \n        "ansible_hostname": "node1",   \n        "ansible_nodename": "node1",   \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "name": "node1"  \n}  \n  \nnode-1节点再查看主机名：exit退出生效  \n[root@node-1 ~]# hostname  \nnode1\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("8>Cron模块：计划任务支持时间：minute , hour , day , month , weekday：分钟，小时，日，月，周")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m cron -a 'minute=* weekday=1,2,3 job=\"/usr/bin/wall FBI warning\" name=warning'    #创建任务  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warning"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warning"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  \nnode-1节点查看：node-2节点类似  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node-1 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   ")]),s._v("\nBroadcast message from root@node-1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Tue Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":48:01 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  \n  \nFBI warning  \n  \nBroadcast message from root@node-1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Tue Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":49:01 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  \n  \nFBI warning  \n  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m cron -a 'disabled=true job=\"/usr/bin/wall FBI warning\" name=warning'    #disabled=true关闭任务  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warning"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warning"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m cron -a 'job=\"/usr/bin/wall FBI warning\" name=warning state=absent'    #absent删除任务  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jobs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br")])]),a("p",[s._v("9>Yum：管理包　　ansible server -m yum -a 'name=httpd state=latest'安装　　ansible server -m yum -a 'name=httpd state=absent'删除")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m yum -a 'name=httpd state=latest'    #latest：安装  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"installed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpd"')]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"updated"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rc"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"results"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Loaded plugins: fastestmirror'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Loading mirror speeds from cached hostfile"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Resolving Dependencies"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package httpd.x86_64 0:2.4.6-67.el7.centos will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: httpd-tools = 2.4.6-67.el7.centos for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: /etc/mime.types for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: libaprutil-1.so.0()(64bit) for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: libapr-1.so.0()(64bit) for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package apr.x86_64 0:1.4.8-3.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package apr-util.x86_64 0:1.5.2-6.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package httpd-tools.x86_64 0:2.4.6-67.el7.centos will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package mailcap.noarch 0:2.1.41-2.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Finished Dependency Resolution"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Dependencies Resolved"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" Package            Arch          Version                     Repository   Size"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installing:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd              x86_64        2.4.6-67.el7.centos         base        2.7 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installing for dependencies:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" apr                x86_64        1.4.8-3.el7                 base        103 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" apr-util           x86_64        1.5.2-6.el7                 base         92 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd-tools        x86_64        2.4.6-67.el7.centos         base         87 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" mailcap            noarch        2.1.41-2.el7                base         31 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction Summary"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Install  1 Package (+4 Dependent packages)"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Total download size: 3.0 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installed size: 10 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Downloading packages:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--------------------------------------------------------------------------------"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Total                                              8.4 MB/s | 3.0 MB  00:00     "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction test"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction test succeeded"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : apr-1.4.8-3.el7.x86_64                                       1/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : httpd-tools-2.4.6-67.el7.centos.x86_64                       3/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : mailcap-2.1.41-2.el7.noarch                                  4/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : httpd-2.4.6-67.el7.centos.x86_64                             5/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : httpd-2.4.6-67.el7.centos.x86_64                             1/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : mailcap-2.1.41-2.el7.noarch                                  2/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : apr-1.4.8-3.el7.x86_64                                       3/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : httpd-tools-2.4.6-67.el7.centos.x86_64                       4/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  5/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installed:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd.x86_64 0:2.4.6-67.el7.centos                                            "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Dependency Installed:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  apr.x86_64 0:1.4.8-3.el7                     apr-util.x86_64 0:1.5.2-6.el7    "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd-tools.x86_64 0:2.4.6-67.el7.centos     mailcap.noarch 0:2.1.41-2.el7    "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Complete!"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"installed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpd"')]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",   \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"updated"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rc"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"results"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Loaded plugins: fastestmirror'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Loading mirror speeds from cached hostfile"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Resolving Dependencies"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package httpd.x86_64 0:2.4.6-67.el7.centos will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: httpd-tools = 2.4.6-67.el7.centos for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: /etc/mime.types for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: libaprutil-1.so.0()(64bit) for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Processing Dependency: libapr-1.so.0()(64bit) for package: httpd-2.4.6-67.el7.centos.x86_64"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package apr.x86_64 0:1.4.8-3.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package apr-util.x86_64 0:1.5.2-6.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package httpd-tools.x86_64 0:2.4.6-67.el7.centos will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e Package mailcap.noarch 0:2.1.41-2.el7 will be installed"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e Finished Dependency Resolution"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Dependencies Resolved"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" Package            Arch          Version                     Repository   Size"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installing:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd              x86_64        2.4.6-67.el7.centos         base        2.7 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installing for dependencies:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" apr                x86_64        1.4.8-3.el7                 base        103 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" apr-util           x86_64        1.5.2-6.el7                 base         92 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd-tools        x86_64        2.4.6-67.el7.centos         base         87 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" mailcap            noarch        2.1.41-2.el7                base         31 k"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction Summary"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Install  1 Package (+4 Dependent packages)"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Total download size: 3.0 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installed size: 10 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Downloading packages:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--------------------------------------------------------------------------------"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Total                                              8.3 MB/s | 3.0 MB  00:00     "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction test"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction test succeeded"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : apr-1.4.8-3.el7.x86_64                                       1/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : httpd-tools-2.4.6-67.el7.centos.x86_64                       3/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : mailcap-2.1.41-2.el7.noarch                                  4/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Installing : httpd-2.4.6-67.el7.centos.x86_64                             5/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : httpd-2.4.6-67.el7.centos.x86_64                             1/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : mailcap-2.1.41-2.el7.noarch                                  2/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : apr-1.4.8-3.el7.x86_64                                       3/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : httpd-tools-2.4.6-67.el7.centos.x86_64                       4/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  5/5 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Installed:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd.x86_64 0:2.4.6-67.el7.centos                                            "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Dependency Installed:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  apr.x86_64 0:1.4.8-3.el7                     apr-util.x86_64 0:1.5.2-6.el7    "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd-tools.x86_64 0:2.4.6-67.el7.centos     mailcap.noarch 0:2.1.41-2.el7    "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Complete!"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m shell -a 'rpm -q httpd'    #查看是否安装  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Consider using the yum, dnf or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zypper")]),s._v(" module rather than running "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rpm'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \nIf you need to use "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" because yum, dnf or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zypper")]),s._v(" is insufficient you can "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'warn: false'")]),s._v(" to this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" task or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'command_warnings=False'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" ansible.cfg  \nto get rid of this message.  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("  \nhttpd-2.4.6-67.el7.centos.x86_64  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("  \nhttpd-2.4.6-67.el7.centos.x86_64  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m yum -a 'name=httpd state=absent'    #absent：卸载  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"removed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpd"')]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rc"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"results"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"已加载插件：fastestmirror'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("正在解决依赖关系"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e 正在检查事务"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e 软件包 httpd.x86_64.0.2.4.6-67.el7.centos 将被 删除"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e 解决依赖关系完成"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("依赖关系解决"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" Package       架构           版本                          源             大小"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("正在删除:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd         x86_64         2.4.6-67.el7.centos           @base         9.4 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("事务概要"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("移除  1 软件包"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("安装大小：9.4 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Downloading packages:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction test"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction test succeeded"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  正在删除    : httpd-2.4.6-67.el7.centos.x86_64                            1/1 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  验证中      : httpd-2.4.6-67.el7.centos.x86_64                            1/1 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("删除:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd.x86_64 0:2.4.6-67.el7.centos                                            "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("完毕！"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"removed"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpd"')]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rc"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",   \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"results"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"已加载插件：fastestmirror'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("正在解决依赖关系"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e 正在检查事务"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("---\x3e 软件包 httpd.x86_64.0.2.4.6-67.el7.centos 将被 删除"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("--\x3e 解决依赖关系完成"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("依赖关系解决"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" Package       架构           版本                          源             大小"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("正在删除:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v(" httpd         x86_64         2.4.6-67.el7.centos           @base         9.4 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("事务概要"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("================================================================================"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("移除  1 软件包"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("安装大小：9.4 M"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Downloading packages:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction check"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction test"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Transaction test succeeded"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("Running transaction"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  正在删除    : httpd-2.4.6-67.el7.centos.x86_64                            1/1 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  验证中      : httpd-2.4.6-67.el7.centos.x86_64                            1/1 "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("删除:"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("  httpd.x86_64 0:2.4.6-67.el7.centos                                            "),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("完毕！"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ansible ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ansible all -m shell -a 'rpm -q httpd'    #卸载后查看  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WARNING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Consider using the yum, dnf or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zypper")]),s._v(" module rather than running "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rpm'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \nIf you need to use "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" because yum, dnf or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zypper")]),s._v(" is insufficient you can "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'warn: false'")]),s._v(" to this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" task or "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'command_warnings=False'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" ansible.cfg  \nto get rid of this message.  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" FAILED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("  \n未安装软件包 httpd non-zero "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" code  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".100.10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" FAILED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("  \n未安装软件包 httpd non-zero "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" code\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br")])]),a("p",[s._v("10>Service模块：管理服务　　ansible server -m service -a 'name=httpd state=stopped'　　ansible server -m service -a 'name=httpd state=started'　　ansible server -m service -a 'name=httpd state=reloaded'　　ansible server -m service -a 'name=httpd state=restarted'")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#ansible all -m yum -a 'name=httpd state=latest'    #安装httpd  \n[root@ansible ~]#ansible all -m shell -a 'ss -ntl'  \n192.168.100.20 | CHANGED | rc=0 >>  \nState      Recv-Q Send-Q Local Address:Port               Peer Address:Port                \nLISTEN     0      128          *:22                       *:*   \nLISTEN     0      100    127.0.0.1:25                       *:*   \nLISTEN     0      128         :::22                      :::*                    \nLISTEN     0      100        ::1:25                      :::*   \n192.168.100.10 | CHANGED | rc=0 >>  \nState      Recv-Q Send-Q Local Address:Port               Peer Address:Port   \nLISTEN     0      128          *:22                       *:*                    \nLISTEN     0      100    127.0.0.1:25                       *:*                    \nLISTEN     0      128         :::22                      :::*   \nLISTEN     0      100        ::1:25                      :::*                    \n[root@ansible ~]#ansible all -m service -a 'name=httpd state=started enabled=yes'    #启动httpd，并设为开机自启动  \n[root@ansible ~]#ansible all -m shell -a 'ss -ntl'  \n192.168.100.20 | CHANGED | rc=0 >>  \nState      Recv-Q Send-Q Local Address:Port               Peer Address:Port                \nLISTEN     0      128          *:22                       *:*   \nLISTEN     0      100    127.0.0.1:25                       *:*   \nLISTEN     0      128         :::80                      :::*                    \nLISTEN     0      128         :::22                      :::*   \nLISTEN     0      100        ::1:25                      :::*                    \n192.168.100.10 | CHANGED | rc=0 >>  \nState      Recv-Q Send-Q Local Address:Port               Peer Address:Port                \nLISTEN     0      128          *:22                       *:*   \nLISTEN     0      100    127.0.0.1:25                       *:*   \nLISTEN     0      128         :::80                      :::*                    \nLISTEN     0      128         :::22                      :::*   \nLISTEN     0      100        ::1:25                      :::*[root@ansible ~]#ansible all -m service -a 'name=httpd state=stopped'    #关闭httpd  \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("p",[s._v("11>User模块：管理用户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible all -m user -a \'name=nginx shell=/sbin/nologin system=yes home=/var/nginx groups=root,bin uid=77 comment="nginx service"\'    #创建用户指定shell类型，系统账号，家目录，附加组，uid，描述信息  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "comment": "nginx service",   \n    "create_home": true,   \n    "group": 77,   \n    "groups": "root,bin",   \n    "home": "/var/nginx",   \n    "name": "nginx",   \n    "shell": "/sbin/nologin",   \n    "state": "present",   \n    "system": true,   \n    "uid": 77  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "comment": "nginx service",   \n    "create_home": true,   \n    "group": 77,   \n    "groups": "root,bin",   \n    "home": "/var/nginx",   \n    "name": "nginx",   \n    "shell": "/sbin/nologin",   \n    "state": "present",   \n    "system": true,   \n    "uid": 77  \n}  \n[root@ansible ~]#ansible all -a \'getent passwd nginx\'  \n192.168.100.20 | CHANGED | rc=0 >>  \nnginx:x:77:77:nginx service:/var/nginx:/sbin/nologin  \n192.168.100.10 | CHANGED | rc=0 >>  \nnginx:x:77:77:nginx service:/var/nginx:/sbin/nologin  \n[root@ansible ~]#ansible all -m user -a \'name=nginx state=absent remove=yes\'    #删除用户及其家目录信息  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "force": false,   \n    "name": "nginx",   \n    "remove": true,   \n    "state": "absent",   \n    "stderr": "userdel: nginx 邮件池 (/var/spool/mail/nginx) 未找到\\n",   \n    "stderr_lines": [  \n        "userdel: nginx 邮件池 (/var/spool/mail/nginx) 未找到"  \n    ]  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "force": false,   \n    "name": "nginx",   \n    "remove": true,   \n    "state": "absent",   \n    "stderr": "userdel: nginx 邮件池 (/var/spool/mail/nginx) 未找到\\n",   \n    "stderr_lines": [  \n        "userdel: nginx 邮件池 (/var/spool/mail/nginx) 未找到"  \n    ]  \n}  \n[root@ansible ~]#ansible all -a \'getent passwd nginx\'  \n192.168.100.20 | FAILED | rc=2 >>  \nnon-zero return code  \n192.168.100.10 | FAILED | rc=2 >>  \nnon-zero return code\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br")])]),a("p",[s._v("12>Group：管理组")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@ansible ~]#ansible all -m group -a \'name=nginx system=yes gid=88\'  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "gid": 88,   \n    "name": "nginx",   \n    "state": "present",   \n    "system": true  \n}  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "gid": 88,   \n    "name": "nginx",   \n    "state": "present",   \n    "system": true  \n}  \n[root@ansible ~]#ansible all -a \'getent group nginx\'  \n192.168.100.20 | CHANGED | rc=0 >>  \nnginx:x:88:  \n192.168.100.10 | CHANGED | rc=0 >>  \nnginx:x:88:  \n[root@ansible ~]#ansible all -m group -a \'name=nginx state=absent\'  \n192.168.100.20 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "name": "nginx",   \n    "state": "absent"  \n}  \n192.168.100.10 | CHANGED => {  \n    "ansible_facts": {  \n        "discovered_interpreter_python": "/usr/bin/python"  \n    },   \n    "changed": true,   \n    "name": "nginx",   \n    "state": "absent"  \n}  \n[root@ansible ~]#ansible all -a \'getent group nginx\'  \n192.168.100.20 | FAILED | rc=2 >>  \nnon-zero return code  \n192.168.100.10 | FAILED | rc=2 >>  \nnon-zero return code\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("p",[s._v("模块用法不清楚可以查看帮助：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ansible ~]#ansible-doc -s cron    #例：查看cron模块\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("感谢作者：我听过")]),s._v(" "),a("p",[s._v("出处：http://dwz.date/bYGu")])])}),[],!1,null,null,null);n.default=e.exports}}]);