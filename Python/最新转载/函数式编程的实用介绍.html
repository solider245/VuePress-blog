<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数式编程的实用介绍 | 吴起的个人网站</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://images-1255533533.cos.ap-shanghai.myqcloud.com/20190817214528_05c52e04cf64654248918bfc2a1f64ab.png">
    <link rel="manifest" href="/VuePress-blog/manifest.json">
    <link rel="apple-touch-icon" href="/VuePress-blog/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/VuePress-blog/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="在此处添描述">
    <meta name="author" content="中箭的吴起">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/VuePress-blog/assets/css/0.styles.f7cbc213.css" as="style"><link rel="preload" href="/VuePress-blog/assets/js/app.776d277d.js" as="script"><link rel="preload" href="/VuePress-blog/assets/js/2.c5117f2a.js" as="script"><link rel="preload" href="/VuePress-blog/assets/js/39.82fe0431.js" as="script"><link rel="prefetch" href="/VuePress-blog/assets/js/10.63714471.js"><link rel="prefetch" href="/VuePress-blog/assets/js/100.1cec5f39.js"><link rel="prefetch" href="/VuePress-blog/assets/js/101.c74c6d95.js"><link rel="prefetch" href="/VuePress-blog/assets/js/102.d22dd18b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/103.409414e4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/104.d4463a76.js"><link rel="prefetch" href="/VuePress-blog/assets/js/105.f70dcd32.js"><link rel="prefetch" href="/VuePress-blog/assets/js/106.6516b84b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/107.bdeabcbf.js"><link rel="prefetch" href="/VuePress-blog/assets/js/108.8c48acb2.js"><link rel="prefetch" href="/VuePress-blog/assets/js/109.85df5626.js"><link rel="prefetch" href="/VuePress-blog/assets/js/11.a24f4a33.js"><link rel="prefetch" href="/VuePress-blog/assets/js/110.5e67e89d.js"><link rel="prefetch" href="/VuePress-blog/assets/js/111.769d339f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/112.e75614b5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/113.63d1e519.js"><link rel="prefetch" href="/VuePress-blog/assets/js/114.e7a470dc.js"><link rel="prefetch" href="/VuePress-blog/assets/js/115.66e52ce5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/116.4f75586b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/117.c2ad36ee.js"><link rel="prefetch" href="/VuePress-blog/assets/js/118.b6e98de6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/119.b57896d6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/12.abc1e9a9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/120.e5da282b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/121.eb8b36b3.js"><link rel="prefetch" href="/VuePress-blog/assets/js/122.e3fa1136.js"><link rel="prefetch" href="/VuePress-blog/assets/js/123.d4a35a0f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/124.894663d4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/125.0e2df5ef.js"><link rel="prefetch" href="/VuePress-blog/assets/js/126.a62c9f29.js"><link rel="prefetch" href="/VuePress-blog/assets/js/127.c4c12b2c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/128.a3d4f63f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/129.a4a9c4b9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/13.f38ab9c5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/130.2b6974e6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/131.2c254cb6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/132.3c69d560.js"><link rel="prefetch" href="/VuePress-blog/assets/js/133.52d6127d.js"><link rel="prefetch" href="/VuePress-blog/assets/js/134.c2d0a90c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/135.cd6b9f1a.js"><link rel="prefetch" href="/VuePress-blog/assets/js/136.1dc89614.js"><link rel="prefetch" href="/VuePress-blog/assets/js/137.f9b5cb48.js"><link rel="prefetch" href="/VuePress-blog/assets/js/138.41523b28.js"><link rel="prefetch" href="/VuePress-blog/assets/js/139.2e2adbf4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/14.fb0fad09.js"><link rel="prefetch" href="/VuePress-blog/assets/js/140.112e35af.js"><link rel="prefetch" href="/VuePress-blog/assets/js/141.2e348226.js"><link rel="prefetch" href="/VuePress-blog/assets/js/142.59b5c9ef.js"><link rel="prefetch" href="/VuePress-blog/assets/js/143.a6a726d2.js"><link rel="prefetch" href="/VuePress-blog/assets/js/144.ec4a46cb.js"><link rel="prefetch" href="/VuePress-blog/assets/js/145.0b187c1e.js"><link rel="prefetch" href="/VuePress-blog/assets/js/146.b3977b6a.js"><link rel="prefetch" href="/VuePress-blog/assets/js/147.070dded6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/148.703bfa68.js"><link rel="prefetch" href="/VuePress-blog/assets/js/149.eef402f6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/15.a3e85e42.js"><link rel="prefetch" href="/VuePress-blog/assets/js/150.f625ba2f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/151.22a07089.js"><link rel="prefetch" href="/VuePress-blog/assets/js/152.d84ba7a0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/153.fb36a102.js"><link rel="prefetch" href="/VuePress-blog/assets/js/154.6b471035.js"><link rel="prefetch" href="/VuePress-blog/assets/js/155.511972d8.js"><link rel="prefetch" href="/VuePress-blog/assets/js/156.9b71a1ed.js"><link rel="prefetch" href="/VuePress-blog/assets/js/157.b1ced696.js"><link rel="prefetch" href="/VuePress-blog/assets/js/158.df097da9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/159.e0884310.js"><link rel="prefetch" href="/VuePress-blog/assets/js/16.1487bb0e.js"><link rel="prefetch" href="/VuePress-blog/assets/js/160.19c256dc.js"><link rel="prefetch" href="/VuePress-blog/assets/js/161.b4a55559.js"><link rel="prefetch" href="/VuePress-blog/assets/js/162.3bf8822d.js"><link rel="prefetch" href="/VuePress-blog/assets/js/163.b02d1d5b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/164.6efbaf12.js"><link rel="prefetch" href="/VuePress-blog/assets/js/165.ec61fd46.js"><link rel="prefetch" href="/VuePress-blog/assets/js/166.1aeb18e9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/167.53136d07.js"><link rel="prefetch" href="/VuePress-blog/assets/js/168.860b0f88.js"><link rel="prefetch" href="/VuePress-blog/assets/js/169.1701350b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/17.c965c030.js"><link rel="prefetch" href="/VuePress-blog/assets/js/170.d3659f87.js"><link rel="prefetch" href="/VuePress-blog/assets/js/171.6299f6e6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/172.14097eb7.js"><link rel="prefetch" href="/VuePress-blog/assets/js/173.cd9135dd.js"><link rel="prefetch" href="/VuePress-blog/assets/js/174.4f623e28.js"><link rel="prefetch" href="/VuePress-blog/assets/js/175.1528ea30.js"><link rel="prefetch" href="/VuePress-blog/assets/js/176.4b91e0a6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/177.9d0306c6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/178.135bf962.js"><link rel="prefetch" href="/VuePress-blog/assets/js/179.09bf5238.js"><link rel="prefetch" href="/VuePress-blog/assets/js/18.7dab8018.js"><link rel="prefetch" href="/VuePress-blog/assets/js/180.6d15ee73.js"><link rel="prefetch" href="/VuePress-blog/assets/js/181.16ccddbf.js"><link rel="prefetch" href="/VuePress-blog/assets/js/182.a440c46e.js"><link rel="prefetch" href="/VuePress-blog/assets/js/183.3b17ab33.js"><link rel="prefetch" href="/VuePress-blog/assets/js/184.1c37fda0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/185.5e91aae0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/186.c040be0b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/187.04c35a68.js"><link rel="prefetch" href="/VuePress-blog/assets/js/188.d3dffa3f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/189.f8d1a701.js"><link rel="prefetch" href="/VuePress-blog/assets/js/19.936a56a4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/190.935f2ffb.js"><link rel="prefetch" href="/VuePress-blog/assets/js/191.ce68c987.js"><link rel="prefetch" href="/VuePress-blog/assets/js/192.2cd5f900.js"><link rel="prefetch" href="/VuePress-blog/assets/js/193.4fffa096.js"><link rel="prefetch" href="/VuePress-blog/assets/js/194.763b33a4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/195.41c8a153.js"><link rel="prefetch" href="/VuePress-blog/assets/js/196.18b4eb2c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/197.7670df82.js"><link rel="prefetch" href="/VuePress-blog/assets/js/198.680a1a80.js"><link rel="prefetch" href="/VuePress-blog/assets/js/199.bbbe2ec0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/20.1da56eb7.js"><link rel="prefetch" href="/VuePress-blog/assets/js/200.de87ea80.js"><link rel="prefetch" href="/VuePress-blog/assets/js/201.0ceace3d.js"><link rel="prefetch" href="/VuePress-blog/assets/js/202.c2800a06.js"><link rel="prefetch" href="/VuePress-blog/assets/js/203.48924c48.js"><link rel="prefetch" href="/VuePress-blog/assets/js/204.9fb412e6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/205.19599c35.js"><link rel="prefetch" href="/VuePress-blog/assets/js/206.1a278f71.js"><link rel="prefetch" href="/VuePress-blog/assets/js/207.378bf6a0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/208.dec187fe.js"><link rel="prefetch" href="/VuePress-blog/assets/js/209.d3326143.js"><link rel="prefetch" href="/VuePress-blog/assets/js/21.14a0c6c5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/210.ed9af624.js"><link rel="prefetch" href="/VuePress-blog/assets/js/211.4c2999ee.js"><link rel="prefetch" href="/VuePress-blog/assets/js/212.b7055185.js"><link rel="prefetch" href="/VuePress-blog/assets/js/213.95bd0c97.js"><link rel="prefetch" href="/VuePress-blog/assets/js/214.be14627f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/215.8532e5a4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/216.956add10.js"><link rel="prefetch" href="/VuePress-blog/assets/js/217.b921800c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/218.279a2533.js"><link rel="prefetch" href="/VuePress-blog/assets/js/219.941f503f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/22.207eb093.js"><link rel="prefetch" href="/VuePress-blog/assets/js/23.fcaf57a6.js"><link rel="prefetch" href="/VuePress-blog/assets/js/24.549b45ee.js"><link rel="prefetch" href="/VuePress-blog/assets/js/25.68d51b90.js"><link rel="prefetch" href="/VuePress-blog/assets/js/26.75eef058.js"><link rel="prefetch" href="/VuePress-blog/assets/js/27.e465c84f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/28.ec75d8c3.js"><link rel="prefetch" href="/VuePress-blog/assets/js/29.e22ecade.js"><link rel="prefetch" href="/VuePress-blog/assets/js/3.85032dd8.js"><link rel="prefetch" href="/VuePress-blog/assets/js/30.eac685a4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/31.2d55d3f1.js"><link rel="prefetch" href="/VuePress-blog/assets/js/32.9a6373e2.js"><link rel="prefetch" href="/VuePress-blog/assets/js/33.91a32ba3.js"><link rel="prefetch" href="/VuePress-blog/assets/js/34.9b401b73.js"><link rel="prefetch" href="/VuePress-blog/assets/js/35.a1a2bcde.js"><link rel="prefetch" href="/VuePress-blog/assets/js/36.405a7a4c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/37.d6422337.js"><link rel="prefetch" href="/VuePress-blog/assets/js/38.9915a3eb.js"><link rel="prefetch" href="/VuePress-blog/assets/js/4.7334dde5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/40.76830c33.js"><link rel="prefetch" href="/VuePress-blog/assets/js/41.d1dfc6c3.js"><link rel="prefetch" href="/VuePress-blog/assets/js/42.12371fe2.js"><link rel="prefetch" href="/VuePress-blog/assets/js/43.e3607529.js"><link rel="prefetch" href="/VuePress-blog/assets/js/44.6cec67f8.js"><link rel="prefetch" href="/VuePress-blog/assets/js/45.c20ac641.js"><link rel="prefetch" href="/VuePress-blog/assets/js/46.50d5ceed.js"><link rel="prefetch" href="/VuePress-blog/assets/js/47.6f06c416.js"><link rel="prefetch" href="/VuePress-blog/assets/js/48.08a068dc.js"><link rel="prefetch" href="/VuePress-blog/assets/js/49.e6b4bd72.js"><link rel="prefetch" href="/VuePress-blog/assets/js/5.7139b9b4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/50.3cb53aad.js"><link rel="prefetch" href="/VuePress-blog/assets/js/51.0e647151.js"><link rel="prefetch" href="/VuePress-blog/assets/js/52.7ff01978.js"><link rel="prefetch" href="/VuePress-blog/assets/js/53.36a9d767.js"><link rel="prefetch" href="/VuePress-blog/assets/js/54.e6bbecb4.js"><link rel="prefetch" href="/VuePress-blog/assets/js/55.bdf81af3.js"><link rel="prefetch" href="/VuePress-blog/assets/js/56.5c96c795.js"><link rel="prefetch" href="/VuePress-blog/assets/js/57.f89a2345.js"><link rel="prefetch" href="/VuePress-blog/assets/js/58.d11b047a.js"><link rel="prefetch" href="/VuePress-blog/assets/js/59.12c9a488.js"><link rel="prefetch" href="/VuePress-blog/assets/js/6.6e6603ff.js"><link rel="prefetch" href="/VuePress-blog/assets/js/60.ba63105e.js"><link rel="prefetch" href="/VuePress-blog/assets/js/61.a6c1a4f7.js"><link rel="prefetch" href="/VuePress-blog/assets/js/62.3cc2256f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/63.c33f9fe1.js"><link rel="prefetch" href="/VuePress-blog/assets/js/64.9200eb22.js"><link rel="prefetch" href="/VuePress-blog/assets/js/65.fd000469.js"><link rel="prefetch" href="/VuePress-blog/assets/js/66.512243e8.js"><link rel="prefetch" href="/VuePress-blog/assets/js/67.faaf727b.js"><link rel="prefetch" href="/VuePress-blog/assets/js/68.ef92ba52.js"><link rel="prefetch" href="/VuePress-blog/assets/js/69.b1700696.js"><link rel="prefetch" href="/VuePress-blog/assets/js/7.4e3bdcaf.js"><link rel="prefetch" href="/VuePress-blog/assets/js/70.a0687351.js"><link rel="prefetch" href="/VuePress-blog/assets/js/71.3a14e318.js"><link rel="prefetch" href="/VuePress-blog/assets/js/72.99b53005.js"><link rel="prefetch" href="/VuePress-blog/assets/js/73.897a92b9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/74.b16f1719.js"><link rel="prefetch" href="/VuePress-blog/assets/js/75.002964da.js"><link rel="prefetch" href="/VuePress-blog/assets/js/76.7624e778.js"><link rel="prefetch" href="/VuePress-blog/assets/js/77.e00d405d.js"><link rel="prefetch" href="/VuePress-blog/assets/js/78.95645db5.js"><link rel="prefetch" href="/VuePress-blog/assets/js/79.bba0d631.js"><link rel="prefetch" href="/VuePress-blog/assets/js/8.d7f6aae7.js"><link rel="prefetch" href="/VuePress-blog/assets/js/80.b728c7d7.js"><link rel="prefetch" href="/VuePress-blog/assets/js/81.41b1a44a.js"><link rel="prefetch" href="/VuePress-blog/assets/js/82.c5fe8c82.js"><link rel="prefetch" href="/VuePress-blog/assets/js/83.b899cdd2.js"><link rel="prefetch" href="/VuePress-blog/assets/js/84.f92dd1f0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/85.30ecf40f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/86.62a793c0.js"><link rel="prefetch" href="/VuePress-blog/assets/js/87.97927fa1.js"><link rel="prefetch" href="/VuePress-blog/assets/js/88.f65e94f8.js"><link rel="prefetch" href="/VuePress-blog/assets/js/89.dd682117.js"><link rel="prefetch" href="/VuePress-blog/assets/js/9.2af41852.js"><link rel="prefetch" href="/VuePress-blog/assets/js/90.437e6ec1.js"><link rel="prefetch" href="/VuePress-blog/assets/js/91.577f36e9.js"><link rel="prefetch" href="/VuePress-blog/assets/js/92.7c4d870f.js"><link rel="prefetch" href="/VuePress-blog/assets/js/93.9cfe8160.js"><link rel="prefetch" href="/VuePress-blog/assets/js/94.88b6a333.js"><link rel="prefetch" href="/VuePress-blog/assets/js/95.1ba03060.js"><link rel="prefetch" href="/VuePress-blog/assets/js/96.2693d156.js"><link rel="prefetch" href="/VuePress-blog/assets/js/97.49968a31.js"><link rel="prefetch" href="/VuePress-blog/assets/js/98.71a6785c.js"><link rel="prefetch" href="/VuePress-blog/assets/js/99.b7ba0c42.js">
    <link rel="stylesheet" href="/VuePress-blog/assets/css/0.styles.f7cbc213.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuePress-blog/" class="home-link router-link-active"><!----> <span class="site-name">吴起的个人网站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章转载" class="dropdown-title"><span class="title">文章转载</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/Linux常见命令/" class="nav-link">
  Linux常见命令
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/Linux常用软件/" class="nav-link">
  Linux常用软件
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><h4>
          Vim
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress-blog/文章转载/Vim/vim文章/" class="nav-link">
  vim文章
</a></li><li class="dropdown-subitem"><a href="/VuePress-blog/文章转载/Vim/vim配置/" class="nav-link">
  vim配置
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常见问题" class="dropdown-title"><span class="title">常见问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/客户端科学上网/" class="nav-link">
  客户端科学上网
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/命令行科学上网/" class="nav-link">
  命令行科学上网
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/镜像加速大全/" class="nav-link">
  镜像加速大全
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/vim/" class="nav-link">
  vim
</a></li><li class="dropdown-item"><h4>
          Pyhton
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress-blog/常见问题/Python/" class="nav-link">
  Pyhton
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><span class="title">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/" class="nav-link router-link-active">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/最新转载/" class="nav-link">
  最新转载
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/爬虫案例/" class="nav-link">
  爬虫案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人原创" class="dropdown-title"><span class="title">个人原创</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/个人原创/" class="nav-link">
  个人原创
</a></li></ul></div></div> <a href="https://github.com/solider245/VuePress-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章转载" class="dropdown-title"><span class="title">文章转载</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/" class="nav-link">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/Linux常见命令/" class="nav-link">
  Linux常见命令
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/Linux常用软件/" class="nav-link">
  Linux常用软件
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/文章转载/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><h4>
          Vim
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress-blog/文章转载/Vim/vim文章/" class="nav-link">
  vim文章
</a></li><li class="dropdown-subitem"><a href="/VuePress-blog/文章转载/Vim/vim配置/" class="nav-link">
  vim配置
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常见问题" class="dropdown-title"><span class="title">常见问题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/客户端科学上网/" class="nav-link">
  客户端科学上网
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/命令行科学上网/" class="nav-link">
  命令行科学上网
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/镜像加速大全/" class="nav-link">
  镜像加速大全
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/常见问题/vim/" class="nav-link">
  vim
</a></li><li class="dropdown-item"><h4>
          Pyhton
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/VuePress-blog/常见问题/Python/" class="nav-link">
  Pyhton
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="python" class="dropdown-title"><span class="title">python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/" class="nav-link router-link-active">
  首页
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/最新转载/" class="nav-link">
  最新转载
</a></li><li class="dropdown-item"><!----> <a href="/VuePress-blog/Python/爬虫案例/" class="nav-link">
  爬虫案例
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人原创" class="dropdown-title"><span class="title">个人原创</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/VuePress-blog/个人原创/" class="nav-link">
  个人原创
</a></li></ul></div></div> <a href="https://github.com/solider245/VuePress-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>最新转载</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/VuePress-blog/Python/最新转载/4行Python代码实时获取股市数据.html" class="sidebar-link">4行Python代码实时获取股市数据</a></li><li><a href="/VuePress-blog/Python/最新转载/Python 爬虫——单线程、多线程、多进程对比.html" class="sidebar-link">Python 爬虫——单线程、多线程、多进程对比</a></li><li><a href="/VuePress-blog/Python/最新转载/Python 爬虫提速：【多进程、多线程、协程+异步】对比测试.html" class="sidebar-link">Python 爬虫提速：【多进程、多线程、协程+异步】对比测试</a></li><li><a href="/VuePress-blog/Python/最新转载/Python 项目管理的利器：虚拟环境 venv 的使用.html" class="sidebar-link">Python 项目管理的利器：虚拟环境 venv 的使用</a></li><li><a href="/VuePress-blog/Python/最新转载/Python使用grequests并发发送请求.html" class="sidebar-link">Python使用grequests并发发送请求</a></li><li><a href="/VuePress-blog/Python/最新转载/Python同步遍历多个列表.html" class="sidebar-link">Python同步遍历多个列表</a></li><li><a href="/VuePress-blog/Python/%E6%9C%80%E6%96%B0%E8%BD%AC%E8%BD%BD/" aria-current="page" class="sidebar-link">README</a></li><li><a href="/VuePress-blog/Python/最新转载/Scrapy 对接 Docker.html" class="sidebar-link">Scrapy 对接 Docker</a></li><li><a href="/VuePress-blog/Python/最新转载/Scrapy分布式爬虫，分布式队列和布隆过滤器，一分钟搞定？ - 掘金.html" class="sidebar-link">Scrapy分布式爬虫，分布式队列和布隆过滤器，一分钟搞定？ - 掘金</a></li><li><a href="/VuePress-blog/Python/最新转载/Scrapy实战3：URL去重策略.html" class="sidebar-link">Scrapy实战3：URL去重策略</a></li><li><a href="/VuePress-blog/Python/最新转载/Web应用程序用Python构建数据科学.html" class="sidebar-link">Web应用程序用Python构建数据科学</a></li><li><a href="/VuePress-blog/Python/最新转载/docker快速搭建分布式爬虫pyspider.html" class="sidebar-link">docker快速搭建分布式爬虫pyspider</a></li><li><a href="/VuePress-blog/Python/最新转载/gevent程序员指南.html" class="sidebar-link">gevent程序员指南</a></li><li><a href="/VuePress-blog/Python/最新转载/main函数的语法模板.html" class="sidebar-link">main函数的语法模板</a></li><li><a href="/VuePress-blog/Python/最新转载/pandas使用的25个技巧.html" class="sidebar-link">pandas使用的25个技巧</a></li><li><a href="/VuePress-blog/Python/最新转载/pyenv 和 pyenv-virtualenv 的安装、配置和使用.html" class="sidebar-link">pyenv 和 pyenv-virtualenv 的安装、配置和使用</a></li><li><a href="/VuePress-blog/Python/最新转载/pyenv用国内镜像安装python3.8.html" class="sidebar-link">pyenv用国内镜像安装python3.8</a></li><li><a href="/VuePress-blog/Python/最新转载/pyenv的安装和简单使用(git、pyenv、pyenv-virtualenv).html" class="sidebar-link">pyenv的安装和简单使用（git、pyenv、pyenv-virtualenv）</a></li><li><a href="/VuePress-blog/Python/最新转载/python time获取两个时间点的差.html" class="sidebar-link">python time获取两个时间点的差</a></li><li><a href="/VuePress-blog/Python/最新转载/python常见可视化工具库.html" class="sidebar-link">python常见可视化工具库</a></li><li><a href="/VuePress-blog/Python/最新转载/python爬虫入门-05-URL去重.html" class="sidebar-link">python爬虫入门-05-URL去重</a></li><li><a href="/VuePress-blog/Python/最新转载/python笔记49：两种方式来遍历目录.html" class="sidebar-link">python笔记49：两种方式来遍历目录</a></li><li><a href="/VuePress-blog/Python/最新转载/scrapy docker教程.html" class="sidebar-link">scrapy docker教程</a></li><li><a href="/VuePress-blog/Python/最新转载/一文看懂Python多进程与多线程编程(工作学习面试必读).html" class="sidebar-link">一文看懂Python多进程与多线程编程(工作学习面试必读)</a></li><li><a href="/VuePress-blog/Python/最新转载/一篇文章搞定Python多进程(全).html" class="sidebar-link">一篇文章搞定Python多进程(全)</a></li><li><a href="/VuePress-blog/Python/最新转载/为Python选择一个更快的JSON库.html" class="sidebar-link">为Python选择一个更快的JSON库</a></li><li><a href="/VuePress-blog/Python/最新转载/为什么您的多处理池卡住了（它充满了鲨鱼！）.html" class="sidebar-link">为什么您的多处理池卡住了（它充满了鲨鱼！）</a></li><li><a href="/VuePress-blog/Python/最新转载/使用Docker分布式部署爬虫系统Pyspider.html" class="sidebar-link">使用Docker分布式部署爬虫系统Pyspider</a></li><li><a href="/VuePress-blog/Python/最新转载/使用Python和Vue.js自动化报告过程.html" class="sidebar-link">使用Python和Vue.js自动化报告过程</a></li><li><a href="/VuePress-blog/Python/最新转载/停止用CSV格式保存Pandas数据帧.html" class="sidebar-link">停止用CSV格式保存Pandas数据帧</a></li><li><a href="/VuePress-blog/Python/最新转载/函数式编程-酷壳网.html" class="sidebar-link">函数式编程-酷壳网</a></li><li><a href="/VuePress-blog/Python/最新转载/函数式编程的实用介绍.html" class="active sidebar-link">函数式编程的实用介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/VuePress-blog/Python/最新转载/四十四、Python的os模块的文件与目录常用方法.html" class="sidebar-link">Python的os模块的文件与目录常用方法</a></li><li><a href="/VuePress-blog/Python/最新转载/在Python中main函数是怎么来的.html" class="sidebar-link">在Python中main函数是怎么来的</a></li><li><a href="/VuePress-blog/Python/最新转载/在Python中妥善使用进度条.html" class="sidebar-link">在Python中妥善使用进度条</a></li><li><a href="/VuePress-blog/Python/最新转载/外行学Python爬虫第四篇URL去重.html" class="sidebar-link">外行学Python爬虫第四篇URL去重</a></li><li><a href="/VuePress-blog/Python/最新转载/多线程threading.html" class="sidebar-link">多线程threading</a></li><li><a href="/VuePress-blog/Python/最新转载/多线程、进程太慢？嫌Scrapy太麻烦？没事，异步高调走起.html" class="sidebar-link">进程)太慢？嫌Scrapy太麻烦？没事，异步高调走起</a></li><li><a href="/VuePress-blog/Python/最新转载/如何在Python中实现树？.html" class="sidebar-link">如何在Python中实现树？</a></li><li><a href="/VuePress-blog/Python/最新转载/带有动手示例的Python-main功能教程.html" class="sidebar-link">带有动手示例的Python-main功能教程</a></li><li><a href="/VuePress-blog/Python/最新转载/日期时间-日期-时间值操作.html" class="sidebar-link">日期时间-日期-时间值操作</a></li><li><a href="/VuePress-blog/Python/最新转载/时间函数datetime常见用法汇总.html" class="sidebar-link">时间函数datetime常见用法汇总</a></li><li><a href="/VuePress-blog/Python/最新转载/最全的Python虚拟环境使用方法.html" class="sidebar-link">最全的Python虚拟环境使用方法</a></li><li><a href="/VuePress-blog/Python/最新转载/爬虫常用Xpath和CSS3选择器对比.html" class="sidebar-link">爬虫常用Xpath和CSS3选择器对比</a></li><li><a href="/VuePress-blog/Python/最新转载/爬虫练习之数据清洗——基于Pandas.html" class="sidebar-link">爬虫练习之数据清洗——基于Pandas</a></li><li><a href="/VuePress-blog/Python/最新转载/芝加哥哈林顿教授Python教程.html" class="sidebar-link">芝加哥哈林顿教授Python教程</a></li><li><a href="/VuePress-blog/Python/最新转载/虚拟环境和包官方.html" class="sidebar-link">虚拟环境和包</a></li><li><a href="/VuePress-blog/Python/最新转载/谈谈python的GIL、多线程、多进程.html" class="sidebar-link">谈谈python的GIL、多线程、多进程</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#导向绳">导向绳</a></li><li><a href="#不要遍历列表。使用地图并减少。">不要遍历列表。使用地图并减少。</a><ul><li><a href="#地图">地图</a></li><li><a href="#减少">减少</a></li></ul></li><li><a href="#声明式而非强制性地写">声明式而非强制性地写</a><ul><li><a href="#使用功能">使用功能</a></li><li><a href="#移除状态">移除状态</a></li></ul></li><li><a href="#使用管道">使用管道</a></li><li><a href="#现在怎么办？">现在怎么办？</a></li></ul></div><p></p> <p>许多函数式编程文章都讲授抽象的函数技术。即，合成，流水线，高阶函数。这是不同的。它显示了人们每天编写的命令性，非功能性代码示例，并将这些示例转换为功能性样式。</p> <p>本文的第一部分采用了简短的数据转换循环，并将其转换为功能映射并进行了简化。第二部分采用更长的循环，将其分解为多个单元并使每个单元起作用。第三部分介绍了一个循环，该循环是一系列连续的数据转换，并将其分解为功能流水线。</p> <p>这些示例使用Python，因为许多人发现Python易于阅读。为了说明许多语言共有的功能技术，许多示例避免了Python性：映射，归约，流水线。所有示例都在Python 2中。</p> <h3 id="导向绳">导向绳</h3> <p>当人们谈论函数式编程时，他们提到了令人眼花number乱的“函数式”特性。他们提到了不可变数据1，一流的功能2和尾部调用优化3。这些是有助于功能编程的语言功能。他们提到了映射，归约，流水线，递归，循环4以及使用高阶函数。这些是用于编写功能代码的编程技术。他们提到并行化5，惰性评估6和确定性7。这些是功能程序的有利属性。</p> <p>忽略所有这些。功能代码的特点是一件事：没有副作用。它不依赖当前函数外部的数据，也不更改当前函数外部的数据。其他所有“功能性”事物都可以从此属性派生。在学习时将其用作引导绳。</p> <p>这是一个不起作用的功能：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>a = 0
def increment():
    global a
    a += 1 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这是一个功能函数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>def increment(a):
    return a + 1 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="不要遍历列表。使用地图并减少。">不要遍历列表。使用地图并减少。</h3> <h4 id="地图">地图</h4> <p>地图具有功能和项目集合。它创建一个新的空集合，在原始集合中的每个项目上运行该函数，并将每个返回值插入到新集合中。它返回新的集合。</p> <p>这是一个简单的映射，它包含一个名称列表并返回这些名称的长度列表：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>name_lengths = map(len, [&quot;Mary&quot;, &quot;Isla&quot;, &quot;Sam&quot;])

print name_lengths
# =&gt; [4, 4, 3] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这是一张将传递的集合中的每个数字平方的地图：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>squares = map(lambda x: x * x, [0, 1, 2, 3, 4])

print squares
# =&gt; [0, 1, 4, 9, 16] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>该映射没有命名函数。它需要使用定义的匿名内联函数<code>lambda</code>。Lambda的参数定义在冒号的左侧。函数主体定义在冒号的右侧。（隐式）返回运行函数体的结果。</p> <p>下面的无效代码将使用真实姓名列表，并将其替换为随机分配的代码名称。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> random

names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Mary'</span><span class="token punctuation">,</span> <span class="token string">'Isla'</span><span class="token punctuation">,</span> <span class="token string">'Sam'</span><span class="token punctuation">]</span>
code_names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Mr. Pink'</span><span class="token punctuation">,</span> <span class="token string">'Mr. Orange'</span><span class="token punctuation">,</span> <span class="token string">'Mr. Blonde'</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    names<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>code_names<span class="token punctuation">)</span>

<span class="token keyword">print</span> names
<span class="token comment"># =&gt; ['Mr. Blonde', 'Mr. Blonde', 'Mr. Blonde'] </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>（如您所见，该算法可以为多个秘密特工分配相同的秘密代码名称。希望这不会在秘密任务期间造成混乱。）</p> <p>可以将其重写为地图：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import random

names = ['Mary', 'Isla', 'Sam']

secret_names = map(lambda x: random.choice(['Mr. Pink',
                                            'Mr. Orange',
                                            'Mr. Blonde']),
                   names) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>练习1</strong>。尝试将以下代码重写为地图。它获取一个实名列表，并将其替换为使用更可靠策略生成的代码名。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>names = ['Mary', 'Isla', 'Sam']

for i in range(len(names)):
    names[i] = hash(names[i])

print names
# =&gt; [6306819796133686941, 8135353348168144921, -1228887169324443034] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>（希望秘密特工会留下美好的回忆，并且在秘密任务期间不会忘记彼此的秘密代号。）</p> <p>我的解决方案：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>names = ['Mary', 'Isla', 'Sam']

secret_names = map(hash, names) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="减少">减少</h4> <p>Reduce具有功能和项目集合。它返回通过组合项目创建的值。</p> <p>这是一个简单的减少。它返回集合中所有项目的总和。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum = reduce(lambda a, x: a + x, [0, 1, 2, 3, 4])

print sum
# =&gt; 10 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>x</code>是正在迭代的当前项目。<code>a</code>是累加器。它是对上一项执行lambda返回的值。<code>reduce()</code>遍历所有项目。对于每一个，它运行在当前的拉姆达<code>a</code>和<code>x</code>，并返回结果作为<code>a</code>下一次迭代的。</p> <p>什么是<code>a</code>在第一次迭代？没有先前的迭代结果可传递。在第一次迭代<code>reduce()</code>中使用集合中的第一项，<code>a</code>并从第二项开始迭代。即，第一<code>x</code>是第二项。</p> <p>此代码计算单词<code>'Sam'</code>在字符串列表中出现的频率：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>sentences <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Mary read a story to Sam and Isla.'</span><span class="token punctuation">,</span>
             <span class="token string">'Isla cuddled Sam.'</span><span class="token punctuation">,</span>
             <span class="token string">'Sam chortled.'</span><span class="token punctuation">]</span>

sam_count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> sentence <span class="token keyword">in</span> sentences<span class="token punctuation">:</span>
    sam_count <span class="token operator">+=</span> sentence<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'Sam'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> sam_count
<span class="token comment"># =&gt; 3 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这是与reduce相同的代码：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>sentences <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Mary read a story to Sam and Isla.'</span><span class="token punctuation">,</span>
             <span class="token string">'Isla cuddled Sam.'</span><span class="token punctuation">,</span>
             <span class="token string">'Sam chortled.'</span><span class="token punctuation">]</span>

sam_count <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> a<span class="token punctuation">,</span> x<span class="token punctuation">:</span> a <span class="token operator">+</span> x<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token string">'Sam'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   sentences<span class="token punctuation">,</span>
                   <span class="token number">0</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>该代码如何以其首字母开头<code>a</code>？的发生次数的起点<code>'Sam'</code>不能为<code>'Mary read a story to Sam and Isla.'</code>。初始累加器由的第三个参数指定<code>reduce()</code>。这允许使用与集合中的项目不同类型的值。</p> <p>为什么贴图和缩小效果更好？</p> <p>首先，它们通常是单线的。</p> <p>其次，迭代的重要部分-集合，操作和返回值-始终在每个映射中都位于相同的位置，并减少。</p> <p>第三，循环中的代码可能会影响在其之前定义的变量或在其之后运行的代码。按照惯例，映射和归约是功能性的。</p> <p>第四，map和reduce是基本操作。每当一个人阅读一个<code>for</code>循环时，他们就必须逐行地遍历逻辑。他们可以使用很少的结构规则来创建一个脚手架，以使其对代码的理解得以保留。相反，map和reduce既是构建块，可以组合成复杂的算法，而且代码阅读器可以立即在他们的脑海中理解和抽象化元素。“啊，这段代码正在改变这个集合中的每个项目。它抛弃了一些转变。它将其余部分合并为一个输出。”</p> <p>第五，制图和化简有很多朋友，他们提供了基本行为的有用的，经过调整的版本。例如：<code>filter</code>，<code>all</code>，<code>any</code>和<code>find</code>。</p> <p><strong>练习2</strong>。尝试使用map，reduce和filter重写以下代码。过滤器具有一个功能和一个集合。它返回函数返回的每个项目的集合<code>True</code>。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mary'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> <span class="token number">160</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Isla'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Sam'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

height_total <span class="token operator">=</span> <span class="token number">0</span>
height_count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> person <span class="token keyword">in</span> people<span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token string">'height'</span> <span class="token keyword">in</span> person<span class="token punctuation">:</span>
        height_total <span class="token operator">+=</span> person<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span>
        height_count <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token keyword">if</span> height_count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
    average_height <span class="token operator">=</span> height_total <span class="token operator">/</span> height_count

    <span class="token keyword">print</span> average_height
    <span class="token comment"># =&gt; 120 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如果这看起来很棘手，请尝试不要考虑对数据进行的操作。考虑一下数据将经过的状态，从人员字典列表到平均身高。不要尝试将多个转换捆绑在一起。将每个变量放在单独的行上，然后将结果分配给一个描述性名称的变量。代码工作后，将其压缩。</p> <p>我的解决方案：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Mary'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> <span class="token number">160</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Isla'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">:</span> <span class="token number">80</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Sam'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

heights <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token string">'height'</span> <span class="token keyword">in</span> x<span class="token punctuation">,</span> people<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>heights<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> operator <span class="token keyword">import</span> add
    average_height <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> heights<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>heights<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="声明式而非强制性地写">声明式而非强制性地写</h3> <p>以下程序在三辆汽车之间进行比赛。在每个时间步长处，每辆汽车可能会向前行驶或失速。在每个时间步，程序都会打印出到目前为止的汽车路径。经过五个时间步骤，比赛结束了。</p> <p>这是一些示例输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-
--
--

--
--
---

---
--
---

----
---
----

----
----
----- 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这是程序：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> random

time <span class="token operator">=</span> <span class="token number">5</span>
car_positions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">while</span> time<span class="token punctuation">:</span>
    <span class="token comment"># decrease time</span>
    time <span class="token operator">-=</span> <span class="token number">1</span>

    <span class="token keyword">print</span> <span class="token string">''</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>car_positions<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># move car</span>
        <span class="token keyword">if</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.3</span><span class="token punctuation">:</span>
            car_positions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>

        <span class="token comment"># draw car</span>
        <span class="token keyword">print</span> <span class="token string">'-'</span> <span class="token operator">*</span> car_positions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>该代码是强制性编写的。功能版本将是声明性的。它会描述做什么，而不是如何做。</p> <h4 id="使用功能">使用功能</h4> <p>通过将代码片段捆绑到函数中，可以使程序更具声明性。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> random

<span class="token keyword">def</span> <span class="token function">move_cars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> _ <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>car_positions<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.3</span><span class="token punctuation">:</span>
            car_positions<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>

<span class="token keyword">def</span> <span class="token function">draw_car</span><span class="token punctuation">(</span>car_position<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'-'</span> <span class="token operator">*</span> car_position

<span class="token keyword">def</span> <span class="token function">run_step_of_race</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> time
    time <span class="token operator">-=</span> <span class="token number">1</span>
    move_cars<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">''</span>
    <span class="token keyword">for</span> car_position <span class="token keyword">in</span> car_positions<span class="token punctuation">:</span>
        draw_car<span class="token punctuation">(</span>car_position<span class="token punctuation">)</span>

time <span class="token operator">=</span> <span class="token number">5</span>
car_positions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token keyword">while</span> time<span class="token punctuation">:</span>
    run_step_of_race<span class="token punctuation">(</span><span class="token punctuation">)</span>
    draw<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>为了理解该程序，读者只需阅读主循环即可。“如果还有时间，请参加比赛并抽签。再次检查时间。” 如果读者想更多地了解进行比赛或绘画的含义，则可以阅读这些函数中的代码。</p> <p>没有更多评论了。该代码描述了自己。</p> <p>将代码拆分为功能是一种很棒的，低脑力的方法，可以使代码更具可读性。</p> <p>该技术使用函数，但是将它们用作子例程。他们打包代码。该代码在引导绳方面不起作用。代码中的函数使用未作为参数传递的状态。它们通过更改外部变量而不是通过返回值来影响其周围的代码。要检查某个功能的真正作用，读者必须仔细阅读每一行。如果找到外部变量，则必须找到其来源。他们必须查看其他哪些函数可以更改该变量。</p> <h4 id="移除状态">移除状态</h4> <p>这是赛车代码的功能版本：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> random <span class="token keyword">import</span> random

<span class="token keyword">def</span> <span class="token function">move_cars</span><span class="token punctuation">(</span>car_positions<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">if</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.3</span> <span class="token keyword">else</span> x<span class="token punctuation">,</span>
               car_positions<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">output_car</span><span class="token punctuation">(</span>car_position<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">'-'</span> <span class="token operator">*</span> car_position

<span class="token keyword">def</span> <span class="token function">run_step_of_race</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'time'</span><span class="token punctuation">:</span> state<span class="token punctuation">[</span><span class="token string">'time'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string">'car_positions'</span><span class="token punctuation">:</span> move_cars<span class="token punctuation">(</span>state<span class="token punctuation">[</span><span class="token string">'car_positions'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">''</span>
    <span class="token keyword">print</span> <span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>output_car<span class="token punctuation">,</span> state<span class="token punctuation">[</span><span class="token string">'car_positions'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">race</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
    draw<span class="token punctuation">(</span>state<span class="token punctuation">)</span>
    <span class="token keyword">if</span> state<span class="token punctuation">[</span><span class="token string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        race<span class="token punctuation">(</span>run_step_of_race<span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>

race<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'time'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token string">'car_positions'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>代码仍然被拆分为功能，但是功能是功能性的。这有三个迹象。首先，不再有任何共享变量。<code>time</code>并<code>car_positions</code>直接通过<code>race()</code>。其次，函数采用参数。第三，在函数内部没有实例化任何变量。所有数据更改都使用返回值完成。<code>race()</code>递归3的结果<code>run_step_of_race()</code>。每次步骤生成新状态时，都会立即将其传递到下一步。</p> <p>现在，这是两个函数，<code>zero()</code>和<code>one()</code>：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">zero</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">one</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>zero()</code>需要一个字符串<code>s</code>。如果第一个字符是<code>'0'</code>，则返回字符串的其余部分。如果不是，它将返回<code>None</code>Python函数的默认返回值。<code>one()</code>的功能相同，但第一个字符为<code>'1'</code>。</p> <p>想象一个名为的函数<code>rule_sequence()</code>。它采用字符串和形式为<code>zero()</code>和的规则函数列表<code>one()</code>。它在字符串上调用第一个规则。除非<code>None</code>返回，否则它将使用返回值并在其上调用第二条规则。除非<code>None</code>返回，否则它将获取返回值并在其上调用第三条规则。依此类推。如果有任何规则返回<code>None</code>，则<code>rule_sequence()</code>停止并返回<code>None</code>。否则，它将返回最终规则的返回值。</p> <p>这是一些示例输入和输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>print rule_sequence('0101', [zero, one, zero])
# =&gt; 1

print rule_sequence('0101', [zero, zero])
# =&gt; None 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这是的命令性版本<code>rule_sequence()</code>：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">rule_sequence</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> rules<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> rule <span class="token keyword">in</span> rules<span class="token punctuation">:</span>
        s <span class="token operator">=</span> rule<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">break</span>

    <span class="token keyword">return</span> s 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>练习3</strong>。上面的代码使用循环来完成其工作。通过将其重写为递归使其更具声明性。</p> <p>我的解决方案：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">rule_sequence</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> rules<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token boolean">None</span> <span class="token keyword">or</span> <span class="token keyword">not</span> rules<span class="token punctuation">:</span>
        <span class="token keyword">return</span> s
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> rule_sequence<span class="token punctuation">(</span>rules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> rules<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="使用管道">使用管道</h3> <p>在上一节中，一些命令性循环被重写为调用辅助函数的递归。在本节中，将使用称为管道的技术来重写另一种命令式循环。</p> <p>下面的循环对包含名称，不正确的原产国和某些乐队的活跃状态的词典进行转换。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>bands <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'sunset rubdown'</span><span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">:</span> <span class="token string">'UK'</span><span class="token punctuation">,</span> <span class="token string">'active'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'women'</span><span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">:</span> <span class="token string">'Germany'</span><span class="token punctuation">,</span> <span class="token string">'active'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'a silver mt. zion'</span><span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">:</span> <span class="token string">'Spain'</span><span class="token punctuation">,</span> <span class="token string">'active'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">format_bands</span><span class="token punctuation">(</span>bands<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> band <span class="token keyword">in</span> bands<span class="token punctuation">:</span>
        band<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Canada'</span>
        band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span>

format_bands<span class="token punctuation">(</span>bands<span class="token punctuation">)</span>

<span class="token keyword">print</span> bands
<span class="token comment"># =&gt; [{'name': 'Sunset Rubdown', 'active': False, 'country': 'Canada'},</span>
<span class="token comment">#     {'name': 'Women', 'active': False, 'country': 'Canada' },</span>
<span class="token comment">#     {'name': 'A Silver Mt Zion', 'active': True, 'country': 'Canada'}] </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>函数名称激起了人们的担忧。“格式”非常模糊。在仔细检查代码后，这些担忧开始消除。同一循环中会发生三件事。该<code>'country'</code>键被设置成<code>'Canada'</code>。标点从乐队名称中删除。乐队名称大写。很难说出代码打算做什么，也很难说出它是否按照它的意图去做。该代码难以重用，难以测试且难以并行化。</p> <p>与此比较：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>print pipeline_each(bands, [set_canada_as_country,
                            strip_punctuation_from_name,
                            capitalize_names]) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这段代码很容易理解。它给人的印象是辅助功能是有功能的，因为它们似乎被链接在一起。前一个的输出包括下一个的输入。如果它们起作用，则易于验证。它们还易于重用，易于测试和易于并行化。</p> <p>的工作<code>pipeline_each()</code>是一次将频段传递给转换函数，例如<code>set_canada_as_country()</code>。将功能应用于所有频段后，<code>pipeline_each()</code>将转换后的频段捆绑在一起。然后，它将每个传递给下一个功能。</p> <p>让我们看一下转换函数。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">assoc</span><span class="token punctuation">(</span>_d<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> copy <span class="token keyword">import</span> deepcopy
    d <span class="token operator">=</span> deepcopy<span class="token punctuation">(</span>_d<span class="token punctuation">)</span>
    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token keyword">return</span> d

<span class="token keyword">def</span> <span class="token function">set_canada_as_country</span><span class="token punctuation">(</span>band<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> assoc<span class="token punctuation">(</span>band<span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">,</span> <span class="token string">&quot;Canada&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">strip_punctuation_from_name</span><span class="token punctuation">(</span>band<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> assoc<span class="token punctuation">(</span>band<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">capitalize_names</span><span class="token punctuation">(</span>band<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> assoc<span class="token punctuation">(</span>band<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> band<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>每个人都将频段上的键与新值相关联。没有改变原始频段的简单方法。<code>assoc()</code>通过使用<code>deepcopy()</code>生成传递的字典的副本来解决此问题。每个转换函数都会对副本进行修改并返回该副本。</p> <p>一切似乎都很好。当键与新值相关联时，可以防止带字典的原始内容发生变异。但是上面的代码还有另外两个潜在的突变。在中<code>strip_punctuation_from_name()</code>，未标点名称是通过调用<code>replace()</code>原始名称生成的。在中<code>capitalize_names()</code>，大写名称是通过调用<code>title()</code>原始名称生成的。如果<code>replace()</code>和<code>title()</code>不起作用，<code>strip_punctuation_from_name()</code>并且<code>capitalize_names()</code>不起作用。</p> <p>幸运的是，<code>replace()</code>并<code>title()</code>没有发生变异，他们在工作中的字符串。这是因为字符串在Python中是不可变的。例如，当<code>replace()</code>对乐队名称字符串进行操作时，原始乐队名称将被复制并<code>replace()</code>在副本上被调用。ew</p> <p>Python中字符串和字典的可变性之间的这种对比说明了Clojure之类的语言的吸引力。程序员无需考虑是否正在变异数据。他们不是。</p> <p><strong>练习4</strong>。尝试编写<code>pipeline_each</code>函数。考虑一下操作顺序。数组中的波段一次传递一个波段到第一个变换函数。将结果数组中的波段一次传递给第二个转换函数。依此类推。</p> <p>我的解决方案：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">pipeline_each</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> fns<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> a<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">map</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  fns<span class="token punctuation">,</span>
                  data<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这三个变换函数都归结为对通过的频段上的特定字段进行更改。<code>call()</code>可以用来抽象它。它需要一个函数来应用，并应用值的键。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>set_canada_as_country <span class="token operator">=</span> call<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token string">'Canada'</span><span class="token punctuation">,</span> <span class="token string">'country'</span><span class="token punctuation">)</span>
strip_punctuation_from_name <span class="token operator">=</span> call<span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
capitalize_names <span class="token operator">=</span> call<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span> pipeline_each<span class="token punctuation">(</span>bands<span class="token punctuation">,</span> <span class="token punctuation">[</span>set_canada_as_country<span class="token punctuation">,</span>
                            strip_punctuation_from_name<span class="token punctuation">,</span>
                            capitalize_names<span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>或者，如果我们为简洁而愿意牺牲可读性，则：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>print pipeline_each(bands, [call(lambda x: 'Canada', 'country'),
                            call(lambda x: x.replace('.', ''), 'name'),
                            call(str.title, 'name')]) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>的代码<code>call()</code>：</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">assoc</span><span class="token punctuation">(</span>_d<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> copy <span class="token keyword">import</span> deepcopy
    d <span class="token operator">=</span> deepcopy<span class="token punctuation">(</span>_d<span class="token punctuation">)</span>
    d<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token keyword">return</span> d

<span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">apply_fn</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> assoc<span class="token punctuation">(</span>record<span class="token punctuation">,</span> key<span class="token punctuation">,</span> fn<span class="token punctuation">(</span>record<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> apply_fn 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这里有很多事情。让我们一步一步来。</p> <p>之一。<code>call()</code>是一个高阶函数。高阶函数将一个函数作为参数，或者返回一个函数。或者，就像<code>call()</code>，两者都可以。</p> <p>二。<code>apply_fn()</code>看起来与三个转换函数非常相似。它需要一个记录（一个乐队）。它查找处的值<code>record[key]</code>。它要求<code>fn</code>该值。它将结果分配回记录的副本。它返回副本。</p> <p>三。<code>call()</code>没有任何实际工作。<code>apply_fn()</code>，当被调用时，将完成工作。在上述使用示例中<code>pipeline_each()</code>，的一个实例<code>apply_fn()</code>将在通过的频段上设置<code>'country'</code>为<code>'Canada'</code>。另一个实例将大写通过的乐队的名称。</p> <p>四。当一个<code>apply_fn()</code>实例上运行，<code>fn</code>而<code>key</code>不会在范围之内。它们既不是参数<code>apply_fn()</code>，也不是其内部的局部变量。但是它们仍然可以访问。定义函数后，它将保存对它关闭的变量的引用：那些在函数外部的作用域中定义且在函数内部使用的变量。当函数运行并且其代码引用了变量时，Python在本地变量和参数中查找变量。如果在该处找不到它，它将在已保存的引用中查找封闭变量。这是它将找到<code>fn</code>和的地方<code>key</code>。</p> <p>五。<code>call()</code>代码中没有提到频段。那是因为<code>call()</code>可以用来为任何程序生成管道功能，而与主题无关。函数式编程部分是关于建立通用，可重用，可组合函数的库。</p> <p>做得好。闭包，高阶函数和变量范围都在几段中涵盖。喝一杯柠檬水。</p> <p>还有一个波段处理要做。那就是除去名字和国家以外的所有东西。<code>extract_name_and_country()</code>可以提取该信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>def extract_name_and_country(band):
    plucked_band = {}
    plucked_band['name'] = band['name']
    plucked_band['country'] = band['country']
    return plucked_band

print pipeline_each(bands, [call(lambda x: 'Canada', 'country'),
                            call(lambda x: x.replace('.', ''), 'name'),
                            call(str.title, 'name'),
                            extract_name_and_country])

# =&gt; [{'name': 'Sunset Rubdown', 'country': 'Canada'},
#     {'name': 'Women', 'country': 'Canada'},
#     {'name': 'A Silver Mt Zion', 'country': 'Canada'}] 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>extract_name_and_country()</code>本来可以写成称为的通用函数<code>pluck()</code>。<code>pluck()</code>将被这样使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>print pipeline_each(bands, [call(lambda x: 'Canada', 'country'),
                            call(lambda x: x.replace('.', ''), 'name'),
                            call(str.title, 'name'),
                            pluck(['name', 'country'])]) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>练习5</strong>。<code>pluck()</code>提取要从每个记录中提取的键的列表。尝试并编写它。它需要是一个高阶函数。</p> <p>我的解决方案：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>def pluck(keys):
    def pluck_fn(record):
        return reduce(lambda a, x: assoc(a, x, record[x]),
                      keys,
                      {})
    return pluck_fn 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="现在怎么办？">现在怎么办？</h3> <p>功能代码可以与其他样式的代码很好地共存。本文中的转换可以应用于任何语言的任何代码库。尝试将它们应用于您自己的代码。</p> <p>想想玛丽，艾斯拉和山姆。将列表的迭代转化为地图并进行简化。</p> <p>想想种族。将代码分解为函数。使这些功能起作用。将重复一个过程的循环变成递归。</p> <p>想想乐队。将一系列操作转换为管道。</p> <p>1不变的数据是无法更改的数据。某些语言（例如Clojure）默认使所有值不可变。任何“变异”操作都将复制该值，对其进行更改，然后将更改后的副本传回。这样可以消除由于程序员的不完整模型（可能导致他们的程序进入的状态）引起的错误。</p> <p>2支持一流功能的语言使功能可以像其他任何值一样对待。这意味着它们可以被创建，传递给函数，从函数返回并存储在数据结构内部。</p> <p>3尾叫优化是一种编程语言功能。每次函数递归时，都会创建一个新的堆栈框架。堆栈框架用于存储当前函数调用的参数和局部值。如果函数重复多次，则解释器或编译器可能会用完内存。具有尾部调用优化功能的语言将其整个递归调用序列重用相同的堆栈框架。像Python这样的没有尾部调用优化的语言通常会将函数递归的次数限制为数千个。对于该<code>race()</code>功能，只有五个时间步长，因此很安全。</p> <p>4 Currying意味着将接受多个参数的函数分解为接受第一个参数的函数，并返回接受下一个参数的函数，以此类推。</p> <p>5并行化是指在不同步的情况下同时运行相同的代码。这些并发进程通常在多个处理器上运行。</p> <p>6惰性求值是一种编译器技术，可避免在需要结果之前运行代码。</p> <p>7如果重复每次都产生相同的结果，则该过程是确定性的。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/solider245/VuePress-blog/edit/master/docs/Python/最新转载/函数式编程的实用介绍.md" target="_blank" rel="noopener noreferrer">你要教我做事咯？</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/26/2020, 7:55:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/VuePress-blog/Python/最新转载/函数式编程-酷壳网.html" class="prev">
        函数式编程-酷壳网
      </a></span> <span class="next"><a href="/VuePress-blog/Python/最新转载/四十四、Python的os模块的文件与目录常用方法.html">
        Python的os模块的文件与目录常用方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/VuePress-blog/assets/js/app.776d277d.js" defer></script><script src="/VuePress-blog/assets/js/2.c5117f2a.js" defer></script><script src="/VuePress-blog/assets/js/39.82fe0431.js" defer></script>
  </body>
</html>
